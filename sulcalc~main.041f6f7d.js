(window.webpackJsonp=window.webpackJsonp||[]).push([[4],[function(e,t,a){"use strict";var i={};a.r(i),a.d(i,"genName",function(){return K}),a.d(i,"natureName",function(){return V}),a.d(i,"natureId",function(){return j}),a.d(i,"natureMultiplier",function(){return z}),a.d(i,"natureStats",function(){return q}),a.d(i,"pokemonName",function(){return Q}),a.d(i,"pokemonId",function(){return Z}),a.d(i,"isPokeReleased",function(){return J}),a.d(i,"releasedPokes",function(){return X}),a.d(i,"baseStats",function(){return $}),a.d(i,"weight",function(){return ee}),a.d(i,"pokeTypes",function(){return te}),a.d(i,"pokeType1",function(){return ae}),a.d(i,"pokeType2",function(){return ie}),a.d(i,"hasEvolution",function(){return se}),a.d(i,"hasPreEvolution",function(){return re}),a.d(i,"isMega",function(){return ne}),a.d(i,"requiredItemForPoke",function(){return oe}),a.d(i,"moveName",function(){return ue}),a.d(i,"moveId",function(){return ce}),a.d(i,"movePower",function(){return he}),a.d(i,"isMoveReleased",function(){return le}),a.d(i,"releasedMoves",function(){return me}),a.d(i,"moveType",function(){return de}),a.d(i,"moveDamageClass",function(){return pe}),a.d(i,"moveIgnoresAbilities",function(){return fe}),a.d(i,"priority",function(){return Se}),a.d(i,"minHits",function(){return be}),a.d(i,"maxHits",function(){return ye}),a.d(i,"hitsMultipleTargets",function(){return Me}),a.d(i,"zMovePower",function(){return ge}),a.d(i,"hasSecondaryEffect",function(){return Ae}),a.d(i,"recoil",function(){return Re}),a.d(i,"isOhkoMove",function(){return Ee}),a.d(i,"hasBiteFlag",function(){return Te}),a.d(i,"hasBulletFlag",function(){return ve}),a.d(i,"hasContactFlag",function(){return ke}),a.d(i,"hasPowderFlag",function(){return Pe}),a.d(i,"hasPulseFlag",function(){return De}),a.d(i,"hasPunchFlag",function(){return Be}),a.d(i,"requiresRecharge",function(){return He}),a.d(i,"hasSoundFlag",function(){return Ie}),a.d(i,"itemName",function(){return we}),a.d(i,"itemId",function(){return Oe}),a.d(i,"isItemReleased",function(){return Ce}),a.d(i,"isHeavy",function(){return Ne}),a.d(i,"isPlate",function(){return Le}),a.d(i,"itemBoostedType",function(){return Fe}),a.d(i,"berryTypeResist",function(){return xe}),a.d(i,"gemType",function(){return Ge}),a.d(i,"isBerry",function(){return Ke}),a.d(i,"naturalGiftPower",function(){return Ue}),a.d(i,"naturalGiftType",function(){return Ye}),a.d(i,"flingPower",function(){return _e}),a.d(i,"megaStone",function(){return We}),a.d(i,"memoryType",function(){return Ve}),a.d(i,"releasedItems",function(){return je}),a.d(i,"zMoveTransformsTo",function(){return ze}),a.d(i,"zMoveTransformsFrom",function(){return qe}),a.d(i,"abilityName",function(){return Qe}),a.d(i,"abilityId",function(){return Ze}),a.d(i,"isIgnoredByMoldBreaker",function(){return Je}),a.d(i,"isAbilityReleased",function(){return Xe}),a.d(i,"releasedAbilities",function(){return $e}),a.d(i,"immunityType",function(){return et}),a.d(i,"pinchType",function(){return tt}),a.d(i,"critArmor",function(){return at}),a.d(i,"normalToType",function(){return it}),a.d(i,"abilityIgnoresAbilities",function(){return st}),a.d(i,"typeName",function(){return ot}),a.d(i,"typeId",function(){return ut}),a.d(i,"typesForGen",function(){return ct}),a.d(i,"typeDamageClass",function(){return ht}),a.d(i,"isPhysicalType",function(){return lt}),a.d(i,"isSpecialType",function(){return mt}),a.d(i,"isLustrousType",function(){return dt}),a.d(i,"isAdamantType",function(){return pt}),a.d(i,"isGriseousType",function(){return ft}),a.d(i,"isSoulDewType",function(){return St}),a.d(i,"isSandForceType",function(){return bt}),a.d(i,"effectiveness",function(){return Mt});a(6),a(43),a(44),a(76),a(8);var s=a(25),r=a.n(s),n=a(153),o=a.n(n),u=a(55),c=a.n(u),h=a(36),l=a.n(h),m=a(30),d=a.n(m),p=a(95);let f;!function(e){e[e.RBY=1]="RBY",e[e.GSC=2]="GSC",e[e.ADV=3]="ADV",e[e.HGSS=4]="HGSS",e[e.B2W2=5]="B2W2",e[e.ORAS=6]="ORAS",e[e.SM=7]="SM"}(f||(f={}));const S=[f.RBY,f.GSC,f.ADV,f.HGSS,f.B2W2,f.ORAS,f.SM],b=f.SM;let y;!function(e){e[e.HP=0]="HP",e[e.ATK=1]="ATK",e[e.DEF=2]="DEF",e[e.SATK=3]="SATK",e[e.SDEF=4]="SDEF",e[e.SPD=5]="SPD",e[e.ACC=6]="ACC",e[e.EVA=7]="EVA",e[e.SPC=3]="SPC"}(y||(y={}));y.HP,y.ATK,y.DEF,y.SATK,y.SDEF,y.SPD,y.HP,y.ATK,y.DEF,y.SPC,y.SPD;let M;!function(e){e[e.NO_GENDER=0]="NO_GENDER",e[e.MALE=1]="MALE",e[e.FEMALE=2]="FEMALE"}(M||(M={}));M.NO_GENDER,M.MALE,M.FEMALE;let g;!function(e){e[e.OTHER=0]="OTHER",e[e.PHYSICAL=1]="PHYSICAL",e[e.SPECIAL=2]="SPECIAL"}(g||(g={}));g.OTHER,g.PHYSICAL,g.SPECIAL;let A;!function(e){e[e.NO_STATUS=0]="NO_STATUS",e[e.POISONED=1]="POISONED",e[e.BADLY_POISONED=2]="BADLY_POISONED",e[e.BURNED=3]="BURNED",e[e.PARALYZED=4]="PARALYZED",e[e.ASLEEP=5]="ASLEEP",e[e.FROZEN=6]="FROZEN"}(A||(A={}));const R=[A.NO_STATUS,A.POISONED,A.BADLY_POISONED,A.BURNED,A.PARALYZED,A.ASLEEP,A.FROZEN];let E;!function(e){e[e.NORMAL=0]="NORMAL",e[e.FIGHTING=1]="FIGHTING",e[e.FLYING=2]="FLYING",e[e.POISON=3]="POISON",e[e.GROUND=4]="GROUND",e[e.ROCK=5]="ROCK",e[e.BUG=6]="BUG",e[e.GHOST=7]="GHOST",e[e.STEEL=8]="STEEL",e[e.FIRE=9]="FIRE",e[e.WATER=10]="WATER",e[e.GRASS=11]="GRASS",e[e.ELECTRIC=12]="ELECTRIC",e[e.PSYCHIC=13]="PSYCHIC",e[e.ICE=14]="ICE",e[e.DRAGON=15]="DRAGON",e[e.DARK=16]="DARK",e[e.FAIRY=17]="FAIRY",e[e.CURSE=18]="CURSE"}(E||(E={}));const T=[E.NORMAL,E.FIGHTING,E.FLYING,E.POISON,E.GROUND,E.ROCK,E.BUG,E.GHOST,E.STEEL,E.FIRE,E.WATER,E.GRASS,E.ELECTRIC,E.PSYCHIC,E.ICE,E.DRAGON,E.DARK,E.FAIRY,E.CURSE];let v;!function(e){e[e.CLEAR=0]="CLEAR",e[e.HAIL=1]="HAIL",e[e.RAIN=2]="RAIN",e[e.SAND=3]="SAND",e[e.SUN=4]="SUN",e[e.HEAVY_RAIN=5]="HEAVY_RAIN",e[e.HARSH_SUN=6]="HARSH_SUN",e[e.STRONG_WINDS=7]="STRONG_WINDS"}(v||(v={}));v.CLEAR,v.SUN,v.RAIN,v.SAND,v.HAIL,v.HARSH_SUN,v.HEAVY_RAIN,v.STRONG_WINDS;let k;!function(e){e[e.HARDY=0]="HARDY",e[e.LONELY=1]="LONELY",e[e.BRAVE=2]="BRAVE",e[e.ADAMANT=3]="ADAMANT",e[e.NAUGHTY=4]="NAUGHTY",e[e.BOLD=5]="BOLD",e[e.DOCILE=6]="DOCILE",e[e.RELAXED=7]="RELAXED",e[e.IMPISH=8]="IMPISH",e[e.LAX=9]="LAX",e[e.TIMID=10]="TIMID",e[e.HASTY=11]="HASTY",e[e.SERIOUS=12]="SERIOUS",e[e.JOLLY=13]="JOLLY",e[e.NAIVE=14]="NAIVE",e[e.MODEST=15]="MODEST",e[e.MILD=16]="MILD",e[e.QUIET=17]="QUIET",e[e.BASHFUL=18]="BASHFUL",e[e.RASH=19]="RASH",e[e.CALM=20]="CALM",e[e.GENTLE=21]="GENTLE",e[e.SASSY=22]="SASSY",e[e.CAREFUL=23]="CAREFUL",e[e.QUIRKY=24]="QUIRKY"}(k||(k={}));const P=[k.HARDY,k.LONELY,k.BRAVE,k.ADAMANT,k.NAUGHTY,k.BOLD,k.DOCILE,k.RELAXED,k.IMPISH,k.LAX,k.TIMID,k.HASTY,k.SERIOUS,k.JOLLY,k.NAIVE,k.MODEST,k.MILD,k.QUIET,k.BASHFUL,k.RASH,k.CALM,k.GENTLE,k.SASSY,k.CAREFUL,k.QUIRKY];let D;!function(e){e[e.NO_TERRAIN=0]="NO_TERRAIN",e[e.GRASSY_TERRAIN=1]="GRASSY_TERRAIN",e[e.MISTY_TERRAIN=2]="MISTY_TERRAIN",e[e.ELECTRIC_TERRAIN=3]="ELECTRIC_TERRAIN",e[e.PSYCHIC_TERRAIN=4]="PSYCHIC_TERRAIN"}(D||(D={}));D.NO_TERRAIN,D.GRASSY_TERRAIN,D.MISTY_TERRAIN,D.ELECTRIC_TERRAIN,D.PSYCHIC_TERRAIN;const B=e=>Math.trunc(e)+(e%1>.5?1:0)-(e%1<-.5?1:0),H=(e,t)=>e*t+2048>>12,I=(e,t)=>B(t*e/4096),w=(e,t)=>t.map(t=>I(e,t));function O(e,t,a){const i=[];for(let s=t;s<=a;s++)i.push(Math.trunc(e*s/a));return i}const C=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.some(e=>e>255)},N=function(e){return e>>(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2)&255},L=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function F(e,t,a){for(let a=e;a<=b;a++)if(o()(p.a[a],t))return c()(p.a[a],t);return a}const x=(e,t)=>a=>{if("string"!=typeof a)return t;const i=a.replace(/[^A-Za-z0-9]/g,"").toLowerCase();return F(b,[e,i])?i:t},G=(e,t)=>e.localeCompare(t),K=e=>F(e,["name"],"SM"),U=[-1,0,1,3,4,2],Y=[1,2,5,3,4],_={[k.HARDY]:"Hardy",[k.LONELY]:"Lonely",[k.BRAVE]:"Brave",[k.ADAMANT]:"Adamant",[k.NAUGHTY]:"Naughty",[k.BOLD]:"Bold",[k.DOCILE]:"Docile",[k.RELAXED]:"Relaxed",[k.IMPISH]:"Impish",[k.LAX]:"Lax",[k.TIMID]:"Timid",[k.HASTY]:"Hasty",[k.SERIOUS]:"Serious",[k.JOLLY]:"Jolly",[k.NAIVE]:"Naive",[k.MODEST]:"Modest",[k.MILD]:"Mild",[k.QUIET]:"Quiet",[k.BASHFUL]:"Bashful",[k.RASH]:"Rash",[k.CALM]:"Calm",[k.GENTLE]:"Gentle",[k.SASSY]:"Sassy",[k.CAREFUL]:"Careful",[k.QUIRKY]:"Quirky"},W={hardy:k.HARDY,lonely:k.LONELY,brave:k.BRAVE,adamant:k.ADAMANT,naughty:k.NAUGHTY,bold:k.BOLD,docile:k.DOCILE,relaxed:k.RELAXED,impish:k.IMPISH,lax:k.LAX,timid:k.TIMID,hasty:k.HASTY,serious:k.SERIOUS,jolly:k.JOLLY,naive:k.NAIVE,modest:k.MODEST,mild:k.MILD,quiet:k.QUIET,bashful:k.BASHFUL,rash:k.RASH,calm:k.CALM,gentle:k.GENTLE,sassy:k.SASSY,careful:k.CAREFUL,quirky:k.QUIRKY},V=e=>_[e],j=e=>l()(W[e.trim().toLowerCase()],k.HARDY),z=(e,t)=>(Math.trunc(e/5)===U[t]?1:0)-(e%5===U[t]?1:0),q=e=>Math.trunc(e/5)===e%5?[-1,-1]:[Y[Math.trunc(e/5)],Y[e%5]],Q=e=>F(b,["pokedex",e,"b"],"(No Pokemon)"),Z=x("pokedex","nopokemon"),J=(e,t)=>t>=F(b,["pokedex",e,"a"]),X=r()(e=>Object.keys(F(b,["pokedex"],{})).filter(t=>J(t,e)).sort(G)),$=(e,t)=>F(t,["pokedex",e,"c"]),ee=(e,t)=>F(t,["pokedex",e,"d"]),te=(e,t)=>F(t,["pokedex",e,"e"],[E.CURSE]),ae=(e,t)=>l()(te(e,t)[0],E.CURSE),ie=(e,t)=>l()(te(e,t)[1],E.CURSE),se=(e,t)=>{return F(t,["pokedex",e,"f"],[]).some(e=>J(e,t))},re=(e,t)=>{const a=F(t,["pokedex",e,"i"],e),i=F(t,["pokedex",a,"g"]);return Boolean(i&&J(i,t))},ne=(e,t)=>Boolean(F(t,["pokedex",e,"h"])),oe=(e,t)=>F(t,["pokedex",e,"j"],"noitem"),ue=e=>F(b,["moves",e,"b"],"(No Move)"),ce=x("moves","nomove"),he=(e,t)=>F(t,["moves",e,"c"],0),le=(e,t)=>t>=F(b,["moves",e,"a"]),me=r()(e=>Object.keys(F(b,["moves"],{})).filter(t=>le(t,e)).sort(G)),de=(e,t)=>F(t,["moves",e,"d"],E.CURSE),pe=(e,t)=>F(t,["moves",e,"e"],g.OTHER),fe=(e,t)=>Boolean(F(t,["moves",e,"f"])),Se=(e,t)=>F(t,["moves",e,"g"],0),be=(e,t)=>F(t,["moves",e,"i","0"],1),ye=(e,t)=>F(t,["moves",e,"i","1"],1),Me=(e,t)=>Boolean(F(t,["moves",e,"j"])),ge=(e,t)=>F(t,["moves",e,"k"]),Ae=(e,t)=>Boolean(F(t,["moves",e,"l"])),Re=(e,t)=>F(t,["moves",e,"m"],0),Ee=(e,t)=>Boolean(F(t,["moves",e,"n"])),Te=(e,t)=>Boolean(F(t,["moves",e,"A"])),ve=(e,t)=>Boolean(F(t,["moves",e,"B"])),ke=(e,t)=>Boolean(F(t,["moves",e,"D"])),Pe=(e,t)=>Boolean(F(t,["moves",e,"E"])),De=(e,t)=>Boolean(F(t,["moves",e,"F"])),Be=(e,t)=>Boolean(F(t,["moves",e,"G"])),He=(e,t)=>Boolean(F(t,["moves",e,"H"])),Ie=(e,t)=>Boolean(F(t,["moves",e,"I"])),we=e=>F(b,["items",e,"b"],"(No Item)"),Oe=x("items","noitem"),Ce=(e,t)=>t>=F(b,["items",e,"a"]),Ne=(e,t)=>Boolean(F(t,["items",e,"j"])),Le=(e,t)=>Boolean(F(t,["items",e,"g"])),Fe=(e,t)=>F(t,["items",e,"k"],-1),xe=(e,t)=>F(t,["items",e,"l"],-1),Ge=(e,t)=>F(t,["items",e,"m"],-1),Ke=(e,t)=>Boolean(F(t,["items",e,"n"])),Ue=(e,t)=>F(t,["items",e,"c","0"],0),Ye=(e,t)=>F(t,["items",e,"c","1"],-1),_e=(e,t)=>F(t,["items",e,"d"],10),We=(e,t)=>F(t,["items",e,"e"],"nopokemon"),Ve=(e,t)=>F(t,["items",e,"i"],E.NORMAL),je=r()(e=>Object.keys(F(b,["items"],{})).filter(t=>Ce(t,e)).sort(G)),ze=(e,t)=>F(t,["items",e,"o","0"]),qe=(e,t)=>F(t,["items",e,"o","1"]),Qe=e=>F(b,["abilities",e,"b"],"(No Ability)"),Ze=x("abilities","noability"),Je=(e,t)=>Boolean(F(t,["abilities",e,"c"])),Xe=(e,t)=>t>=F(b,["abilities",e,"a"]),$e=r()(e=>Object.keys(F(b,["abilities"],{})).filter(t=>Xe(t,e)).sort(G)),et=(e,t)=>F(t,["abilities",e,"d"],-1),tt=(e,t)=>F(t,["abilities",e,"e"],-1),at=(e,t)=>Boolean(F(t,["abilities",e,"f"])),it=(e,t)=>F(t,["abilities",e,"g"],-1),st=(e,t)=>Boolean(F(t,["abilities",e,"h"])),rt={[E.NORMAL]:"Normal",[E.FIGHTING]:"Fighting",[E.FLYING]:"Flying",[E.POISON]:"Poison",[E.GROUND]:"Ground",[E.ROCK]:"Rock",[E.BUG]:"Bug",[E.GHOST]:"Ghost",[E.STEEL]:"Steel",[E.FIRE]:"Fire",[E.WATER]:"Water",[E.GRASS]:"Grass",[E.ELECTRIC]:"Electric",[E.PSYCHIC]:"Psychic",[E.ICE]:"Ice",[E.DRAGON]:"Dragon",[E.DARK]:"Dark",[E.FAIRY]:"Fairy",[E.CURSE]:"Curse"},nt={normal:E.NORMAL,fighting:E.FIGHTING,flying:E.FLYING,poison:E.POISON,ground:E.GROUND,rock:E.ROCK,bug:E.BUG,ghost:E.GHOST,steel:E.STEEL,fire:E.FIRE,water:E.WATER,grass:E.GRASS,electric:E.ELECTRIC,psychic:E.PSYCHIC,ice:E.ICE,dragon:E.DRAGON,dark:E.DARK,fairy:E.FAIRY,curse:E.CURSE},ot=e=>rt[e],ut=e=>l()(nt[e.trim().toLowerCase()],E.CURSE),ct=r()(e=>T.filter(t=>e<f.GSC&&t!==E.STEEL).filter(t=>e<f.GSC&&t!==E.DARK).filter(t=>e<f.ORAS&&t!==E.FAIRY).sort((e,t)=>e-t)),ht=e=>e>=E.FIRE&&e<=E.DARK?g.SPECIAL:g.PHYSICAL,lt=e=>ht(e)===g.PHYSICAL,mt=e=>ht(e)===g.SPECIAL,dt=e=>e===E.WATER||e===E.DRAGON,pt=e=>e===E.STEEL||e===E.DRAGON,ft=e=>e===E.GHOST||e===E.DRAGON,St=e=>e===E.PSYCHIC||e===E.DRAGON,bt=e=>e===E.GROUND||e===E.ROCK||e===E.STEEL,yt=(e,t,a)=>{const i=F(a.gen,["typechart",t,e],2);return a.inverted?i<2?4:i>2?1:2:0===i&&t===E.GHOST&&(a.foresight||a.scrappy)?2:i>2&&t===E.FLYING&&a.strongWinds?2:i},Mt=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{gen:b};const i=d()(e);let s=d()(t);if(a.grounded&&(s=s.filter(e=>e!==E.FLYING)),void 0!==a.immunity&&i.includes(a.immunity)&&(!a.grounded||a.immunity!==E.GROUND))return[0,1];let r=1;for(const e of s)if(a.freezeDry&&e===E.WATER)r*=2*2**i.length;else for(const t of i)r*=yt(t,e,a);if(0===r)return[0,1];const n=Math.log2(r),o=i.length*s.length;return[2**Math.max(0,n-o),2**Math.max(0,o-n)]};var gt=a(154),At=a.n(gt),Rt=(a(247),a(18));var Et=Symbol.iterator;class Tt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t,a,i;if(i=void 0,(a="data")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,e instanceof Tt)this.data=new Map(e.data);else{this.data=new Map;for(const t of e)this.add(t)}}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt.one;return this.data.set(e,(this.data.get(e)||Rt.zero).add(t)),this}clear(){this.data.clear()}count(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!0,t=Rt.zero;for(const[a,i]of this)e(a,i)&&(t=t.add(i));return t}delete(e){return this.data.delete(e)}*entries(){yield*this.data}every(e){for(const t of this)if(!e(...t))return!1;return!0}has(e){return this.data.has(e)}get(e){return this.data.get(e)}intersect(e){const t=e instanceof Tt?e:new Tt(e),a=new Tt;for(const[e,i]of this){const s=t.get(e);void 0!==s&&(i.leq(s)?a.add(e,i):a.add(e,t.get(e)))}return a}isEmpty(){return 0===this.data.size}*keys(){yield*this.data.keys()}map(e){let t=!1;function a(){t=!0}const i=new Tt;for(const s of this){const r=e(s[0],s[1],a);t?t=!1:i.add(r,s[1])}return i}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e>t?1:0;const a=this.values(),i=a.next();if(i.done)return e;let s=i.value;for(const e of a)t(e,s)>0&&(s=e);return s}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e>t?1:0;const a=this.values(),i=a.next();if(i.done)return e;let s=i.value;for(const e of a)t(e,s)<=0&&(s=e);return s}permute(e,t){const a=e instanceof Tt?e:new Tt(e),i=new Tt;for(const[e,s]of this)for(const[r,n]of a)i.add(t(e,r),s.multiply(n));return i}get size(){let e=Rt.zero;for(const t of this.multiplicities())e=e.add(t);return e}reduce(e,t){let a=t;for(const t of this)a=e(a,t[0],t[1]);return a}scale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.one;const t=new Tt;for(const[a,i]of this)t.add(a,i.multiply(e));return t}simplify(){const e=new Tt,t=this.multiplicities(),a=t.next();if(a.done)return e;let i=a.value;for(const e of t)i=Rt.gcd(i,e);for(const[t,a]of this)e.add(t,a.divide(i));return e}some(e){for(const t of this)if(e(...t))return!0;return!1}toArray(){const e=Array(Number(this.size));let t=0;for(const[a,i]of this){const s=Number(i);e.fill(a,t,t+s),t+=s}return e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.join(":"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>{let[a]=e,[i]=t;return(a>i?1:0)-(i>a?1:0)};return Array.from(this).sort(t).map(e).join(", ")}union(e){const t=e instanceof Tt?e:new Tt(e),a=new Tt(this);for(const e of t)a.add(...e);return a}*values(){yield*this.data.keys()}*multiplicities(){yield*this.data.values()}*[Et](){yield*this.data}static average(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const a=e.size;if(a.isZero())return NaN;const i=10**(t+1),s=e.reduce((e,t,a)=>e.add(a.multiply(t)),Rt.zero).multiply(i).divide(a).valueOf();return 10*Math.round(s/10)/i}static fromEntries(e){const t=new Tt;for(const a of e)t.add(...a);return t}static weightedUnion(e,t){const a=e.reduce((e,t)=>e.multiply(t.size),Rt.one);let i=new Tt;for(let s=0;s<e.length;s++){if(!t[s])continue;const r=a.divide(e[s].size).multiply(t[s]),n=e[s].scale(r);i=i.union(n)}return i.simplify()}}a(88);var vt=a(5),kt=a.n(vt);function Pt(e,t){if(null==e)return{};var a,i,s=function(e,t){if(null==e)return{};var a,i,s={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Bt={[E.NORMAL]:"Breakneck Blitz",[E.FIGHTING]:"All-Out Pummeling",[E.FLYING]:"Supersonic Skystrike",[E.POISON]:"Acid Downpour",[E.GROUND]:"Tectonic Rage",[E.ROCK]:"Continental Crush",[E.BUG]:"Savage Spin-Out",[E.GHOST]:"Never-Ending Nightmare",[E.STEEL]:"Corkscrew Crash",[E.FIRE]:"Inferno Overdrive",[E.WATER]:"Hydro Vortex",[E.GRASS]:"Bloom Doom",[E.ELECTRIC]:"Gigavolt Havoc",[E.PSYCHIC]:"Shattered Psyche",[E.ICE]:"Subzero Slammer",[E.DRAGON]:"Devastating Drake",[E.DARK]:"Black Hole Eclipse",[E.FAIRY]:"Twinkle Tackle"},Ht=[y.SPD,y.SATK,y.HP,y.DEF,y.SDEF,y.ATK];function It(e,t){for(const a of Ht)if(e[a]!==t[a])return t[a]-e[a];return 0}class wt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Dt(this,"gen",b),Dt(this,"id","nomove"),Dt(this,"user",void 0),Dt(this,"target",void 0),Dt(this,"critical",!1),Dt(this,"zMove",!1),Dt(this,"secondHit",!1),Dt(this,"meFirst",!1),Dt(this,"roundBoost",!1),Dt(this,"minimize",!1),Dt(this,"dig",!1),Dt(this,"dive",!1),Dt(this,"fly",!1),Dt(this,"previouslyFainted",!1),Dt(this,"fusionFlare",!1),Dt(this,"fusionBolt",!1),Dt(this,"pledgeBoost",!1),Dt(this,"defenseCurl",!1),Dt(this,"magnitude",2),Dt(this,"tripleKickCount",0),Dt(this,"rollout",0),Dt(this,"beatUpHit",0),Dt(this,"numberOfHits",0),Dt(this,"furyCutter",0),Dt(this,"echoedVoice",0),Dt(this,"trumpPP",5),Dt(this,"present",-1);const{id:t,name:a,numberOfHits:i}=e,s=Pt(e,["id","name","numberOfHits"]);Object.assign(this,s),"string"==typeof t?this.id=ce(t):"string"==typeof a&&(this.name=a),void 0===i&&this.user?"Skill Link"===this.user.ability.name?this.numberOfHits=ye(this.id,this.gen):"Water Shuriken"===this.name&&"Greninja-Ash"===this.user.name&&(this.numberOfHits=3):void 0!==i&&(this.numberOfHits=i)}get name(){if(this.zMove&&this.user){const e=this.user.item.zMoveTransformsTo(),t=this.user.item.zMoveTransformsFrom();if(e&&this.id===t)return ue(e)}if(this.zMove){const e=Bt[this.type()];if(void 0!==e)return e}return ue(this.id)}set name(e){this.id=ce(e)}power(){if(this.zMove){const e=this.user&&this.user.item.zMoveTransformsFrom(),t=this.user&&this.user.item.zMoveTransformsTo();return this.id===e&&t?he(t,this.gen):ge(this.id,this.gen)}return he(this.id,this.gen)}type(){return de(this.id,this.gen)}damageClass(){return pe(this.id,this.gen)}isPhysical(){return this.damageClass()===g.PHYSICAL}isSpecial(){return this.damageClass()===g.SPECIAL}isOther(){return this.damageClass()===g.OTHER}priority(){return Se(this.id,this.gen)}isPsyshockLike(){return["Psyshock","Psystrike","Secret Sword"].includes(this.name)}hasRecoil(){return Boolean(Re(this.id,this.gen))}affectedBySheerForce(){return Ae(this.id,this.gen)}isPunch(){return Be(this.id,this.gen)}isContact(){return ke(this.id,this.gen)}isSound(){return Ie(this.id,this.gen)}isPowder(){return Pe(this.id,this.gen)}isBite(){return Te(this.id,this.gen)}isPulse(){return De(this.id,this.gen)}isBall(){return ve(this.id,this.gen)}minHits(){return be(this.id,this.gen)}maxHits(){return ye(this.id,this.gen)}hitsMultipleTimes(){return this.maxHits()>1}hasMultipleTargets(){return Me(this.id,this.gen)}isOhko(){return Ee(this.id,this.gen)}isExplosion(){return["Explosion","Mind Blown","Self-Destruct"].includes(this.name)}requiresRecharge(){return He(this.id,this.gen)}isRecklessBoosted(){return this.hasRecoil()||"Jump Kick"===this.name||"High Jump Kick"===this.name}canCrit(){return this.gen>=f.HGSS||!["Reversal","Flail","Future Sight","Doom Desire","Spit Up"].includes(this.name)}affectedByParentalBond(){return!["Endeavor","Explosion","Final Gambit","Fling","Self-Destruct"].includes(this.name)}optimalHappiness(){return"Return"===this.name?255:0}usesHappiness(){return"Return"===this.name||"Frustration"===this.name}ignoresAbilities(){return fe(this.id,this.gen)}ignoresDefenseBoosts(){return["Chip Away","Sacred Sword","Darkest Lariat"].includes(this.name)}boostedByDig(){return"Earthquake"===this.name||"Magnitude"===this.name}boostedByDive(){return"Surf"===this.name||"Whirlpool"===this.name}boostedByFly(){return"Gust"===this.name||"Twister"===this.name}boostedByMinimize(){switch(this.name){case"Stomp":return this.gen>=f.GSC;case"Astonish":case"Extrasensory":case"Needle Arm":return this.gen===f.ADV;case"Steamroller":return this.gen>=f.B2W2;case"Body Slam":case"Dragon Rush":case"Flying Press":case"Shadow Force":case"Phantom Force":return this.gen>=f.ORAS;case"Heavy Slam":return this.gen>=f.SM;default:return!1}}weakenedByGrassyTerrain(){return["Bulldoze","Earthquake","Magnitude"].includes(this.name)}usesMaxAttackingStat(){return["Photon Geyser","Light That Burns the Sky"].includes(this.name)}isHiddenPower(){return this.name.startsWith("Hidden Power")}static hiddenPowers(e,t){if(t<f.ADV){if(e<E.FIGHTING||e>E.DARK)return[];const t=e-1;return[[(4&t)<<1|(1&t)<<2|3,t>>2|12,3&t|12,15,15,15]]}if(t<f.SM){const t=[];for(let a=0;a<64;a++){const i=[1&a?31:30,2&a?31:30,4&a?31:30,8&a?31:30,16&a?31:30,32&a?31:30];e===wt.hiddenPowerType(i,f.ORAS)&&t.push(i)}return t.sort(It)}return[[31,31,31,31,31,31]]}static hiddenPowerBp(e,t){if(t<f.ADV){const t=e[y.SPC]>>3|e[y.SPD]>>2&2|e[y.DEF]>>1&4|8&e[y.ATK];return 31+Math.trunc((5*t+(3&e[y.SPC]))/2)}if(t<f.ORAS){const t=(2&e[y.HP])>>1|2&e[y.ATK]|(2&e[y.DEF])<<1|(2&e[y.SPD])<<2|(2&e[y.SATK])<<3|(2&e[y.SDEF])<<4;return 30+Math.trunc(40*t/63)}return 60}static hiddenPowerType(e,t){if(t<f.ADV)return 1+((3&e[y.ATK])<<2|3&e[y.DEF]);const a=1&e[y.HP]|(1&e[y.ATK])<<1|(1&e[y.DEF])<<2|(1&e[y.SPD])<<3|(1&e[y.SATK])<<4|(1&e[y.SDEF])<<5;return 1+Math.trunc(15*a/63)}static flail(e,t,a){if(a===f.HGSS){const a=Math.trunc(64*e/t);return a<2?200:a<6?150:a<13?100:a<22?80:a<43?40:20}const i=Math.trunc(48*e/t);return i<=1?200:i<=4?150:i<=9?100:i<=16?80:i<=32?40:20}static magnitude(e){return[10,30,50,70,90,110,150][e-4]}static weatherBall(e){return e===v.SUN||e===v.HARSH_SUN?E.FIRE:e===v.RAIN||e===v.HEAVY_RAIN?E.WATER:e===v.SAND?E.ROCK:e===v.HAIL?E.ICE:E.NORMAL}static trumpCard(e){return[200,80,60,50,40][kt()(e,0,4)]}static electroBall(e,t){const a=Math.floor(e/Math.max(1,t));return a>=4?150:a>=3?120:a>=2?80:a>=1?60:40}static gyroBall(e,t){return Math.min(150,Math.trunc(25*t/Math.max(e,1)))}static grassKnot(e){return e>=2e3?120:e>=1e3?100:e>=500?80:e>=250?60:e>=100?40:20}static heavySlam(e,t){const a=Math.trunc(e/t);return a>=5?120:4===a?100:3===a?80:2===a?60:40}static punishment(e){let t=0;for(const a of e.slice(1,8))a>0&&(t+=a);return Math.min(120,60+20*t)}static storedPower(e){let t=0;for(const a of e.slice(1,8))a>0&&(t+=a);return 20+20*t}static frustration(e){return Math.max(1,Math.trunc(10*(255-e)/25))}static return(e){return Math.max(1,Math.trunc(10*e/25))}static eruption(e,t){return Math.max(1,Math.trunc(150*e/t))}}var Ot=(e,t,a,i)=>{const{gen:s}=i,r=function(e,t,a,i){const{gen:s}=i;if(i.psychicTerrain()&&a.priority()>0&&t.isGrounded(i))return{fail:!0};const r={type:a.type(),power:a.power()};switch(a.name){case"Assurance":e.damagedPreviously&&(r.power*=2);break;case"Avalanche":case"Revenge":e.damagedPreviously&&!e.damagedByPainSplit&&(r.power*=2);break;case"Beat Up":if(s<=f.HGSS)r.type=E.CURSE;else{const t=e.beatUpStats[a.beatUpHit];r.power=Math.trunc(t/10)+5}break;case"Brine":2*t.currentHp<=t.stat(y.HP)&&(r.power*=2);break;case"Echoed Voice":r.power=Math.min(200,40+40*a.echoedVoice);break;case"Electro Ball":r.power=wt.electroBall(e.speed(i),t.speed(i));break;case"Facade":e.status!==A.NO_STATUS&&(r.power*=2);break;case"Fire Pledge":case"Water Pledge":case"Grass Pledge":a.pledgeBoost&&(r.power*=2);break;case"Flail":case"Reversal":r.power=wt.flail(e.currentHp,e.stat(y.HP),s);break;case"Fling":r.power=e.item.flingPower();break;case"Frustration":r.power=wt.frustration(e.happiness);break;case"Fury Cutter":r.power=Math.min(160,r.power*2**a.furyCutter);break;case"Future Sight":case"Doom Desire":s<=f.HGSS&&(r.type=E.CURSE);break;case"Gyro Ball":r.power=wt.gyroBall(e.speed(i),t.speed(i));break;case"Hex":t.status&&(r.power*=2);break;case"Heavy Slam":case"Heat Crash":r.power=wt.heavySlam(e.weight(),t.weight());break;case"Judgment":e.item.isPlate()&&(r.type=e.item.boostedType());break;case"Low Kick":case"Grass Knot":r.power=wt.grassKnot(t.weight());break;case"Magnitude":r.power=wt.magnitude(a.magnitude);break;case"Natural Gift":if(e.item.disabled||!e.item.isBerry())return{fail:!0};r.type=e.item.naturalGiftType(),r.power=e.item.naturalGiftPower();break;case"Present":r.power=40*a.present;break;case"Payback":t.movedFirst&&(r.power*=2);break;case"Punishment":r.power=wt.punishment(t.boosts);break;case"Pursuit":s>=f.ADV&&t.switchedOut&&(r.power*=2);break;case"Return":r.power=wt.return(e.happiness);break;case"Rollout":case"Ice Ball":r.power*=2**((a.rollout-1)%5+(a.defenseCurl?1:0));break;case"Round":a.roundBoost&&(r.power*=2);break;case"Smelling Salts":t.isParalyzed()&&(r.power*=2);break;case"Spit Up":if(0===e.stockpile)return{fail:!0};r.power*=e.stockpile;break;case"Stored Power":case"Power Trip":r.power=wt.storedPower(e.boosts);break;case"Triple Kick":r.power*=a.tripleKickCount;break;case"Trump Card":r.power=wt.trumpCard(a.trumpPP);break;case"Wake-Up Slap":t.isAsleep()&&(r.power*=2);break;case"Water Shuriken":"Greninja-Ash"===e.name&&(r.power=20);break;case"Water Spout":case"Eruption":r.power=wt.eruption(e.currentHp,e.stat(y.HP));break;case"Weather Ball":r.type=wt.weatherBall(i.effectiveWeather()),s>=f.HGSS&&r.type!==E.NORMAL&&(r.power*=2);break;case"Wring Out":case"Crush Grip":{const e=120*t.currentHp/t.stat(y.HP);r.power=s<=f.HGSS?1+Math.trunc(e):Math.max(1,B(e));break}default:a.isHiddenPower()&&(r.type===E.NORMAL&&(r.type=wt.hiddenPowerType(e.ivs,s)),r.power=wt.hiddenPowerBp(e.ivs,s)),s>=f.B2W2&&(a.fly&&a.boostedByFly()?r.power*=2:"Liquid Voice"===e.ability.name&&a.isSound()?r.type=E.WATER:"Multi-Attack"===a.name&&(r.type=e.item.memoryType()))}"Normalize"===e.ability.name&&(r.type=E.NORMAL);return r}(e,t,a,i);if(r.fail||0===r.power)return{fail:!0};const{type:n,power:o}=r;let u=n,c=o;(i.ionDeluge&&u===E.NORMAL||e.electrify)&&(u=E.ELECTRIC),u===E.NORMAL&&e.ability.normalToType()>-1&&(u=e.ability.normalToType());const h=[u];"Flying Press"===a.name&&h.push(E.FLYING);const l=Mt(h,t.types(),{gen:s,foresight:t.foresight,grounded:t.isGrounded(i)||"Thousand Arrows"===a.name,immunity:t.ability.immunityType(),scrappy:"Scrappy"===e.ability.name,freezeDry:"Freeze-Dry"===a.name,inverted:i.invertedBattle,strongWinds:i.strongWinds()}),m=l[0]>l[1],d=l[0]<l[1];if(f.GSC<=s&&s<=f.ADV)(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.fly&&a.boostedByFly())&&(c*=2),i.mudSport&&u===E.ELECTRIC&&(c=Math.trunc(c/2)),i.waterSport&&u===E.FIRE&&(c=Math.trunc(c/2)),e.pinchAbilityActivated(u)&&(c=Math.trunc(3*c/2));else if(s===f.HGSS){switch((a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.fly&&a.boostedByFly()||a.minimize&&a.boostedByMinimize())&&(c*=2),e.helpingHand&&(c=Math.trunc(3*c/2)),e.item.name){case"Muscle Band":a.isPhysical()&&(c=Math.trunc(11*c/10));break;case"Wise Glasses":a.isSpecial()&&(c=Math.trunc(11*c/10));break;case"Adamant Orb":"Dialga"===e.name&&pt(u)&&(c=Math.trunc(12*c/10));break;case"Lustrous Orb":"Palkia"===e.name&&dt(u)&&(c=Math.trunc(12*c/10));break;case"Griseous Orb":e.name.startsWith("Giratina")&&ft(u)&&(c=Math.trunc(12*c/10));break;default:u===e.item.boostedType()&&(c=Math.trunc(12*c/10))}switch(e.charge&&u===E.ELECTRIC&&(c*=2),e.ability.name){case"Rivalry":e.gender&&t.gender&&(c*=e.gender===t.gender?3:5,c=Math.trunc(c/4));break;case"Reckless":a.isRecklessBoosted()&&(c=Math.trunc(12*c/10));break;case"Iron Fist":a.isPunch()&&(c=Math.trunc(12*c/10));break;case"Technician":c<=60&&(c=Math.trunc(3*c/2))}switch(t.ability.name){case"Heatproof":u===E.FIRE&&(c=Math.trunc(c/2));break;case"Thick Fat":u!==E.FIRE&&u!==E.ICE||(c=Math.trunc(c/2));break;case"Dry Skin":u===E.FIRE&&(c=Math.trunc(5*c/4))}(i.mudSport&&u===E.ELECTRIC||i.waterSport&&u===E.FIRE)&&(c=Math.trunc(c/2))}else if(s>=f.B2W2){const r=u===e.item.gemType();e.item.used=e.item.used||r,"Acrobatics"===a.name&&"(No Item)"===e.item.name&&(c*=2);let o=4096;switch(e.ability.name){case"Technician":c<=60&&(o=H(6144,o));break;case"Flare Boost":e.isBurned()&&a.isSpecial()&&(o=H(6144,o));break;case"Analytic":t.movedFirst&&(o=H(5325,o));break;case"Reckless":a.isRecklessBoosted()&&(o=H(4915,o));break;case"Iron Fist":a.isPunch()&&(o=H(4915,o));break;case"Toxic Boost":(e.isPoisoned()||e.isBadlyPoisoned())&&a.isPhysical()&&(o=H(6144,o));break;case"Rivalry":e.gender&&t.gender&&(o=H(e.gender===t.gender?3072:5120,o));break;case"Sand Force":i.sand()&&bt(u)&&(o=H(5325,o));break;case"Tough Claws":a.isContact()&&(o=H(5461,o));break;case"Strong Jaw":a.isBite()&&(o=H(6144,o));break;case"Mega Launcher":a.isPulse()&&(o=H(6144,o));break;case"Parental Bond":if(a.secondHit){const e=s<=f.ORAS?2048:1024;o=H(e,o)}break;case"Steelworker":u===E.STEEL&&(o=H(6144,o));break;case"Water Bubble":u===E.WATER&&(o=H(6144,o));break;case"Neuroforce":m&&(o=H(4915,o));break;default:n===E.NORMAL&&e.ability.normalToType()>-1&&(o=H(5325,o))}if(u===E.FIRE)switch(t.ability.name){case"Heatproof":case"Water Bubble":o=H(2048,o);break;case"Dry Skin":o=H(5120,o)}switch("Sheer Force"===e.ability.name&&a.affectedBySheerForce()&&(o=H(5325,o)),e.item.name){case"Muscle Band":a.isPhysical()&&(o=H(4505,o));break;case"Wise Glasses":a.isSpecial()&&(o=H(4505,o));break;case"Adamant Orb":"Dialga"===e.name&&pt(u)&&(o=H(4915,o));break;case"Lustrous Orb":"Palkia"===e.name&&dt(u)&&(o=H(4915,o));break;case"Griseous Orb":e.name.startsWith("Giratina")&&ft(u)&&(o=H(4915,o));break;case"Soul Dew":s>=f.SM&&St(u)&&("Latias"===e.name||"Latios"===e.name)&&(o=H(4915,o));break;default:if(r){const e=s===f.B2W2?6144:5325;o=H(e,o)}else u===e.item.boostedType()&&(o=H(4915,o))}switch(a.name){case"Facade":e.status&&(o=H(8192,o));break;case"Brine":2*t.currentHp<=t.stat(y.HP)&&(o=H(8192,o));break;case"Venoshock":(e.isPoisoned()||e.isBadlyPoisoned())&&(o=H(8192,o));break;case"Retaliate":a.previouslyFainted&&(o=H(8192,o));break;case"Fusion Bolt":a.fusionFlare&&(o=H(8192,o));break;case"Fusion Flare":a.fusionBolt&&(o=H(8192,o));break;case"Knock Off":s>=f.ORAS&&t.knockOffBoost()&&(o=H(6144,o))}if(a.meFirst&&(o=H(6144,o)),"Solar Beam"!==a.name||i.sun()||i.isClearWeather()||(o=H(2048,o)),e.charge&&u===E.ELECTRIC&&(o=H(8192,o)),e.helpingHand&&(o=H(6144,o)),(i.waterSport&&u===E.FIRE||i.mudSport&&u===E.ELECTRIC)&&(o=H(1352,o)),i.fairyAura&&u===E.FAIRY||i.darkAura&&u===E.DARK){const e=i.auraBreak?3072:5447;o=H(e,o)}c=Math.max(1,I(o,c))}return{moveType:u,movePower:c,effectiveness:l,superEffective:m,notVeryEffective:d}};const Ct={[E.NORMAL]:0,[E.FIGHTING]:1,[E.FLYING]:2,[E.POISON]:3,[E.GROUND]:4,[E.ROCK]:5,[E.BUG]:7,[E.GHOST]:8,[E.STEEL]:9,[E.FIRE]:20,[E.WATER]:21,[E.GRASS]:22,[E.ELECTRIC]:23,[E.PSYCHIC]:24,[E.ICE]:25,[E.DRAGON]:26,[E.DARK]:27};const Nt=(e,t)=>e+t,Lt={[f.RBY]:(e,t,a,i)=>{const s=Ot(e,t,a,i);if(s.fail||0===s.effectiveness[0])return[0];const{moveType:r,movePower:n,effectiveness:o}=s;let u,c,h,l,m,d,p;a.critical?(u=2*e.level,c=e.stat(y.ATK),h=t.stat(y.DEF),l=e.stat(y.SPC),m=t.stat(y.SPC)):(u=e.level,c=e.boostedStat(y.ATK),h=t.boostedStat(y.DEF),l=e.boostedStat(y.SPC),m=t.boostedStat(y.SPC),e.isBurned()&&(c=Math.trunc(c/2)),t.reflect&&(h*=2),t.lightScreen&&(m*=2)),C(c,h)&&(c=Math.max(1,N(c)),h=N(h)),C(l,m)&&(l=Math.max(1,N(l)),m=N(m)),a.isExplosion()&&(h=Math.trunc(h/2)),lt(r)?(d=c,p=h):(d=l,p=m),p=Math.max(1,p);let f=Math.trunc(Math.trunc(Math.trunc(2*u/5+2)*n*d/p)/50);return f=Math.min(997,f)+2,e.stab(r)&&(f=Math.trunc(3*f/2)),O(f=Math.trunc(f*o[0]/o[1]),217,255)},[f.GSC]:(e,t,a,i)=>{const s=Ot(e,t,a,i);if(s.fail||0===s.effectiveness[0])return[0];const{moveType:r,movePower:n,effectiveness:o}=s;let u=e.level;const c=e.boost(y.ATK),h=t.boost(y.DEF),l=e.boost(y.SATK),m=t.boost(y.SDEF);let d,p,f,S,b,M;if(a.critical&&c<=h?(d=e.stat(y.ATK),p=t.stat(y.DEF)):(d=e.boostedStat(y.ATK),p=t.boostedStat(y.DEF),e.isBurned()&&(d=Math.trunc(d/2)),t.reflect&&(p*=2)),a.critical&&l<=m?(f=e.stat(y.SATK),S=t.stat(y.SDEF)):(f=e.boostedStat(y.SATK),S=t.boostedStat(y.SDEF),t.lightScreen&&(S*=2)),e.thickClubBoosted()&&(d*=2),e.lightBallBoosted()&&(f*=2),lt(r))b=d,M=p;else{if(!mt(r))return[0];b=f,M=S}C(b,M)&&(b=N(b),M=Math.max(1,N(M))),"Ditto"===e.name&&"Metal Powder"===e.item.name&&(M=Math.trunc(3*M/2),C(M)&&(b=N(b,1),M=Math.max(1,N(M,1)))),a.isExplosion()&&(M=Math.max(1,Math.trunc(M/2))),"Beat Up"===a.name?(b=e.beatUpStats[a.beatUpHit],M=t.baseStat(y.DEF),u=e.beatUpLevels[a.beatUpHit]):"Present"===a.name&&(b=Math.floor(10*o[0]/o[1]),M=Ct[e.secondaryType()]||0,u=Ct[t.secondaryType()]||0),M=Math.max(1,M);let g=Math.trunc(Math.trunc(Math.trunc(2*u/5+2)*n*b/M)/50);if(a.critical&&(g*=2),e.item.boostedType()===r&&(g=Math.trunc(110*g/100)),g=Math.min(997,g)+2,i.sun()?r===E.FIRE?g=Math.trunc(3*g/2):r===E.WATER&&(g=Math.trunc(g/2)):i.rain()&&(r===E.WATER?g=Math.trunc(3*g/2):r!==E.FIRE&&"Solar Beam"!==a.name||(g=Math.trunc(g/2))),e.stab(r)&&(g=Math.trunc(3*g/2)),g=Math.trunc(g*o[0]/o[1]),"Reversal"===a.name||"Flail"===a.name)return[g];let A=O(g,217,255);return"Pursuit"===a.name&&t.switchedOut&&(A=A.map(e=>2*e)),A},[f.ADV]:(e,t,a,i)=>{const s=Ot(e,t,a,i);if(s.fail||0===s.effectiveness[0])return[0];const{moveType:r,movePower:n,effectiveness:o}=s;let u,c,h,l=e.stat(y.ATK),m=e.stat(y.SATK),d=t.stat(y.DEF),p=t.stat(y.SDEF);switch("Huge Power"!==e.ability.name&&"Pure Power"!==e.ability.name||(l*=2),e.item.name){case"Choice Band":l=Math.trunc(3*l/2);break;case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(m=Math.trunc(3*m/2));break;case"Deep Sea Tooth":"Clamperl"===e.name&&(m*=2);break;case"Sea Incense":m=Math.trunc(105*m/100);break;default:e.item.boostedType()===r?lt(r)?l=Math.trunc(110*l/100):m=Math.trunc(110*m/100):e.thickClubBoosted()?l*=2:e.lightBallBoosted()&&(m*=2)}switch(t.item.name){case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(p=Math.trunc(3*p/2));break;case"Deep Sea Scale":"Clamperl"===t.name&&(p*=2);break;case"Metal Powder":"Ditto"===t.name&&(d*=2)}switch(e.ability.name){case"Hustle":l=Math.trunc(3*l/2);break;case"Plus":e.minus&&(m=Math.trunc(3*m/2));break;case"Minus":e.plus&&(m=Math.trunc(3*m/2));break;case"Guts":e.status&&(l=Math.trunc(3*l/2))}switch(t.ability.name){case"Thick Fat":r!==E.FIRE&&r!==E.ICE||(m=Math.trunc(m/2));break;case"Marvel Scale":t.status&&(d=Math.trunc(3*d/2))}if(a.isExplosion()&&(d=Math.max(1,Math.trunc(d/2))),a.critical?(l=Math.trunc(l*Math.max(2,2+e.boosts[y.ATK])/2),m=Math.trunc(m*Math.max(2,2+e.boosts[y.SATK])/2),d=Math.trunc(2*d/Math.max(2,2-t.boosts[y.DEF])),p=Math.trunc(2*p/Math.max(2,2-t.boosts[y.SDEF]))):(l=Math.trunc(l*Math.max(2,2+e.boosts[y.ATK])/Math.max(2,2-e.boosts[y.ATK])),m=Math.trunc(m*Math.max(2,2+e.boosts[y.SATK])/Math.max(2,2-e.boosts[y.SATK])),d=Math.trunc(d*Math.max(2,2+t.boosts[y.DEF])/Math.max(2,2-t.boosts[y.DEF])),p=Math.trunc(p*Math.max(2,2+t.boosts[y.SDEF])/Math.max(2,2-t.boosts[y.SDEF]))),"Beat Up"===a.name)u=e.beatUpStats[a.beatUpHit],c=t.baseStat(y.DEF),h=e.beatUpLevels[a.beatUpHit];else if(lt(r))u=l,c=d,h=e.level;else{if(!mt(r))return[0];u=m,c=p,h=e.level}let f=Math.trunc(Math.trunc(Math.trunc(2*h/5+2)*n*u/c)/50);switch("Beat Up"!==a.name&&(e.isBurned()&&"Guts"!==e.ability.name&&(f=Math.trunc(f/2)),!a.critical&&(t.reflect&&lt(r)||t.lightScreen&&mt(r))&&(f=Math.trunc(i.multiBattle?2*f/3:f/2))),i.multiBattle&&a.hasMultipleTargets()&&(f=Math.trunc(f/2)),"Weather Ball"!==a.name&&(i.sun()?r===E.FIRE?f=Math.trunc(3*f/2):r===E.WATER&&(f=Math.trunc(f/2)):i.rain()&&(r===E.WATER?f=Math.trunc(3*f/2):r===E.FIRE&&(f=Math.trunc(f/2))),i.sun()||i.isClearWeather()||"Solar Beam"!==a.name||(f=Math.trunc(f/2))),e.flashFire&&r===E.FIRE&&"Flash Fire"===e.ability.name&&(f=Math.trunc(3*f/2)),lt(r)&&(f=Math.max(1,f)),f+=2,a.critical&&(f*=2),a.name){case"Facade":e.status&&(f*=2);break;case"Pursuit":t.switchedOut&&(f*=2);break;case"Revenge":e.damagedPreviously&&(f*=2);break;case"Smelling Salts":t.isParalyzed()&&(f*=2);break;case"Weather Ball":i.isClearWeather()||(f*=2)}if(a.minimize&&a.boostedByMinimize()&&(f*=2),e.charge&&r===E.ELECTRIC&&(f*=2),e.helpingHand&&(f=Math.trunc(3*f/2)),e.stab(r)&&(f=Math.trunc(3*f/2)),f=Math.trunc(f*o[0]/o[1]),"Spit Up"===a.name)return[f];return O(f,85,100)},[f.HGSS]:(e,t,a,i)=>{const s=Ot(e,t,a,i);if(s.fail||0===s.effectiveness[0])return[0];const{moveType:r,movePower:n,effectiveness:o,superEffective:u,notVeryEffective:c}=s;let h,l,m,d;const p="Unaware"===e.ability.name,f="Unaware"===t.ability.name;switch(a.critical?(p?(l=t.stat(y.DEF),m=t.stat(y.SDEF)):(l=Math.min(t.stat(y.DEF),t.boostedStat(y.DEF)),m=Math.min(t.stat(y.SDEF),t.boostedStat(y.SDEF))),f?(h=e.stat(y.ATK),d=e.stat(y.SATK)):(h=Math.max(e.stat(y.ATK),e.boostedStat(y.ATK)),d=Math.max(e.stat(y.SATK),e.boostedStat(y.SATK)))):(p?(l=t.stat(y.DEF),m=t.stat(y.SDEF)):(l=t.boostedStat(y.DEF),m=t.boostedStat(y.SDEF)),f?(h=e.stat(y.ATK),d=e.stat(y.SATK)):(h=e.boostedStat(y.ATK),d=e.boostedStat(y.SATK))),"Huge Power"!==e.ability.name&&"Pure Power"!==e.ability.name||(h*=2),e.flowerGift&&i.sun()&&(h*=2),e.ability.name){case"Guts":e.status&&(h=Math.trunc(3*h/2));break;case"Hustle":h=Math.trunc(3*h/2);break;case"Slow Start":e.slowStart&&(h=Math.trunc(h/2));break;case"Plus":e.minus&&(d=Math.trunc(3*d/2));break;case"Minus":e.plus&&(d=Math.trunc(3*d/2));break;case"Solar Power":i.sun()&&(d*=2)}switch(e.item.name){case"Choice Band":h=Math.trunc(3*h/2);break;case"Choice Specs":d=Math.trunc(3*d/2);break;case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(d=Math.trunc(3*d/2));break;case"Deep Sea Tooth":"Clamperl"===e.name&&(d*=2);break;default:e.thickClubBoosted()?h*=2:e.lightBallBoosted()&&(h*=2,d*=2)}switch(a.isExplosion()&&(l=Math.trunc(l/2)),"Marvel Scale"===t.ability.name&&t.status&&(l=Math.trunc(3*l/2)),t.flowerGift&&i.sun()&&(m=Math.trunc(3*m/2)),t.item.name){case"Metal Powder":"Ditto"===t.name&&(l*=2);break;case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(m=Math.trunc(3*m/2));break;case"Deep Sea Scale":"Clamperl"===t.name&&(m*=2)}let S,b,M;if(i.sand()&&t.stab(E.ROCK)&&(m=Math.trunc(3*m/2)),"Beat Up"===a.name)S=e.beatUpStats[a.beatUpHit],b=t.baseStat(y.DEF),M=e.beatUpLevels[a.beatUpHit];else if(a.isPhysical())S=h,b=l,M=e.level;else{if(!a.isSpecial())return[0];S=d,b=m,M=e.level}let g=Math.trunc(Math.trunc(Math.trunc(2*M/5+2)*n*S/b)/50);if("Beat Up"!==a.name&&(e.isBurned()&&a.isPhysical()&&"Guts"!==e.ability.name&&(g=Math.trunc(g/2)),!a.critical&&(t.reflect&&a.isPhysical()||t.lightScreen&&a.isSpecial())&&(g=i.multiBattle?Math.trunc(2*g/3):Math.trunc(g/2))),i.multiBattle&&a.hasMultipleTargets()&&(g=Math.trunc(3*g/4)),"Weather Ball"!==a.name&&(i.sun()?r===E.FIRE?g=Math.trunc(3*g/2):r===E.WATER&&(g=Math.trunc(g/2)):i.rain()&&(r===E.WATER?g=Math.trunc(3*g/2):r===E.FIRE&&(g=Math.trunc(g/2))),i.sun()||i.isClearWeather()||"Solar Beam"!==a.name||(g=Math.trunc(g/2))),e.flashFire&&r===E.FIRE&&"Flash Fire"===e.ability.name&&(g=Math.trunc(3*g/2)),g+=2,a.critical&&(g*="Sniper"===e.ability.name?3:2),"Beat Up"!==a.name){if("Life Orb"===e.item.name)g=Math.trunc(13*g/10);else if("Metronome"===e.item.name){const t=Math.min(20,10+e.metronome);g=Math.trunc(g*t/10)}a.meFirst&&(g=Math.trunc(3*g/2))}let A=O(g,85,100);return e.stab(r)&&(A=A.map(e=>Math.trunc(3*e/2))),A=A.map(e=>Math.trunc(e*o[0]/o[1])),u?(t.ability.reducesSuperEffective()&&(A=A.map(e=>Math.trunc(3*e/4))),"Expert Belt"===e.item.name&&(A=A.map(e=>Math.trunc(12*e/10))),r===t.item.berryTypeResist()&&(A=A.map(e=>Math.trunc(e/2)))):c&&"Tinted Lens"===e.ability.name&&(A=A.map(e=>2*e)),t.item.berryTypeResist()===E.NORMAL&&r===E.NORMAL&&(A=A.map(e=>Math.trunc(e/2))),A},[f.B2W2]:(e,t,a,i)=>{const s=Ot(e,t,a,i);if(s.fail||0===s.effectiveness[0])return[0];const{moveType:r,movePower:n,effectiveness:o,superEffective:u,notVeryEffective:c}=s,h=i.wonderRoom?y.SDEF:y.DEF,l=i.wonderRoom?y.DEF:y.SDEF,m="Unaware"===e.ability.name,d="Unaware"===t.ability.name;let p,f,S,b;"Foul Play"===a.name?(m?(f=t.stat(h),b=t.stat(l),p=t.stat(y.ATK)):a.critical?(f=Math.min(t.stat(h),t.boostedStat(h)),b=Math.min(t.stat(l),t.boostedStat(l)),p=Math.max(t.stat(y.ATK),t.boostedStat(y.ATK))):(f=t.boostedStat(h),b=t.boostedStat(l),p=t.boostedStat(y.ATK)),S=d?e.stat(y.SATK):a.critical?Math.max(e.stat(y.SATK),e.boostedStat(y.SATK)):e.boostedStat(y.SATK)):a.ignoresDefenseBoosts()?(f=t.stat(h),b=t.stat(l),d?(p=e.stat(y.ATK),S=e.stat(y.SATK)):a.critical?(p=Math.max(e.stat(y.ATK),e.boostedStat(y.ATK)),S=Math.max(e.stat(y.SATK),e.boostedStat(y.SATK))):(p=e.boostedStat(y.ATK),S=e.boostedStat(y.SATK))):(m?(f=t.stat(h),b=t.stat(l)):a.critical?(f=Math.min(t.stat(h),t.boostedStat(h)),b=Math.min(t.stat(l),t.boostedStat(l))):(f=t.boostedStat(h),b=t.boostedStat(l)),d?(p=e.stat(y.ATK),S=e.stat(y.SATK)):a.critical?(p=Math.max(e.stat(y.ATK),e.boostedStat(y.ATK)),S=Math.max(e.stat(y.SATK),e.boostedStat(y.SATK))):(p=e.boostedStat(y.ATK),S=e.boostedStat(y.SATK)));let M=4096,g=4096;switch("Thick Fat"!==t.ability.name||r!==E.FIRE&&r!==E.ICE||(M=H(2048,M),g=H(2048,g)),e.ability.name){case"Guts":t.status&&(M=H(6144,M));break;case"Plus":e.minus&&(g=H(6144,g));break;case"Minus":e.plus&&(g=H(6144,g));break;case"Defeatist":2*e.currentHp<=e.stat(y.HP)&&(M=H(2048,M),g=H(2048,g));break;case"Huge Power":case"Pure Power":M=H(8192,M);break;case"Solar Power":i.sun()&&(g=H(6144,g));break;case"Hustle":p=I(6144,p);break;case"Flash Fire":e.flashFire&&r===E.FIRE&&(M=H(6144,M),g=H(6144,g));break;case"Slow Start":e.slowStart&&(M=H(2048,M));break;default:e.pinchAbilityActivated(r)&&(M=H(6144,M),g=H(6144,g))}switch(e.flowerGift&&i.sun()&&(M=H(6144,M)),e.item.name){case"Deep Sea Tooth":"Clamperl"===e.name&&(g=H(8192,g));break;case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(g=H(6144,g));break;case"Choice Band":M=H(6144,M);break;case"Choice Specs":g=H(6144,g);break;default:e.thickClubBoosted()?M=H(8192,M):e.lightBallBoosted()&&(M=H(8192,M),g=H(8192,g))}p=I(M,p),S=I(g,S),i.sand()&&t.stab(E.ROCK)&&(b=I(6144,b));let A,R,T=4096,v=4096;switch("Marvel Scale"===t.ability.name&&t.status&&(T=H(6144,T)),t.flowerGift&&i.sun()&&(v=H(6144,v)),t.item.name){case"Deep Sea Scale":"Clamperl"===t.name&&(v=H(6144,v));break;case"Metal Powder":"Ditto"===t.name&&(T=H(8192,T));break;case"Eviolite":t.hasEvolution()&&(T=H(6144,T),v=H(6144,v));break;case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(v=H(6144,v))}if(f=I(T,f),b=I(v,b),a.isPsyshockLike())A=S,R=f;else if(a.isPhysical())A=p,R=f;else{if(!a.isSpecial())return[0];A=S,R=b}let k=Math.trunc(Math.trunc(Math.trunc(2*e.level/5+2)*n*A/R)/50);k+=2,i.multiBattle&&a.hasMultipleTargets()&&(k=I(3072,k)),"Weather Ball"!==a.name&&(i.sun()?r===E.FIRE?k=I(6144,k):r===E.WATER&&(k=I(2048,k)):i.rain()&&(r===E.WATER?k=I(6144,k):r===E.FIRE&&(k=I(2048,k)))),a.critical&&(k=I(8192,k));let P=O(k,85,100);e.stab(r)&&(P="Adaptability"===e.ability.name?w(8192,P):w(6144,P)),P=P.map(e=>Math.trunc(e*o[0]/o[1])),e.isBurned()&&a.isPhysical()&&"Guts"!==e.ability.name&&(P=P.map(e=>Math.trunc(e/2))),P=P.map(e=>Math.max(1,e));let D=4096;switch(a.critical||"Infiltrator"===e.ability.name||(t.reflect&&(a.isPhysical()||a.isPsyshockLike())&&(D=H(i.multiBattle?2703:2048,D)),t.lightScreen&&a.isSpecial()&&!a.isPsyshockLike()&&(D=H(i.multiBattle?2703:2048,D))),t.multiscaleIsActive()&&(D=H(2048,D)),c&&"Tinted Lens"===e.ability.name&&(D=H(8192,D)),t.friendGuard&&(D=H(3072,D)),"Sniper"===e.ability.name&&a.critical&&(D=H(6144,D)),u&&t.ability.reducesSuperEffective()&&(D=H(3072,D)),e.item.name){case"Metronome":if(e.metronome<=4){const t=4096+819*e.metronome;D=H(t,D)}else D=H(8192,D);break;case"Expert Belt":u&&(D=H(4915,D));break;case"Life Orb":D=H(5324,D)}return r!==t.item.berryTypeResist()||!u&&r!==E.NORMAL||(D=H(2048,D),t.item.used=!0),(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.minimize&&a.boostedByMinimize())&&(D=H(8192,D)),P=w(D,P)},[f.ORAS]:(e,t,a,i)=>{const s=Ot(e,t,a,i);if(s.fail||0===s.effectiveness[0])return[0];const{moveType:r,movePower:n,effectiveness:o,superEffective:u,notVeryEffective:c}=s,h=i.wonderRoom?y.SDEF:y.DEF,l=i.wonderRoom?y.DEF:y.SDEF,m="Unaware"===e.ability.name,d="Unaware"===t.ability.name;let p,f,S,b;"Foul Play"===a.name?(m?(f=t.stat(h),b=t.stat(l),p=t.stat(y.ATK)):a.critical?(f=Math.min(t.stat(h),t.boostedStat(h)),b=Math.min(t.stat(l),t.boostedStat(l)),p=Math.max(t.stat(y.ATK),t.boostedStat(y.ATK))):(f=t.boostedStat(h),b=t.boostedStat(l),p=t.boostedStat(y.ATK)),S=d?e.stat(y.SATK):a.critical?Math.max(e.stat(y.SATK),e.boostedStat(y.SATK)):e.boostedStat(y.SATK)):a.ignoresDefenseBoosts()?(f=t.stat(h),b=t.stat(l),d?(p=e.stat(y.ATK),S=e.stat(y.SATK)):a.critical?(p=Math.max(e.stat(y.ATK),e.boostedStat(y.ATK)),S=Math.max(e.stat(y.SATK),e.boostedStat(y.SATK))):(p=e.boostedStat(y.ATK),S=e.boostedStat(y.SATK))):(m?(f=t.stat(h),b=t.stat(l)):a.critical?(f=Math.min(t.stat(h),t.boostedStat(h)),b=Math.min(t.stat(l),t.boostedStat(l))):(f=t.boostedStat(h),b=t.boostedStat(l)),d?(p=e.stat(y.ATK),S=e.stat(y.SATK)):a.critical?(p=Math.max(e.stat(y.ATK),e.boostedStat(y.ATK)),S=Math.max(e.stat(y.SATK),e.boostedStat(y.SATK))):(p=e.boostedStat(y.ATK),S=e.boostedStat(y.SATK)));let M=4096,g=4096;switch("Thick Fat"!==t.ability.name||r!==E.FIRE&&r!==E.ICE||(M=H(2048,M),g=H(2048,g)),e.ability.name){case"Guts":t.status&&(M=H(6144,M));break;case"Plus":e.minus&&(g=H(6144,g));break;case"Minus":e.plus&&(g=H(6144,g));break;case"Defeatist":2*e.currentHp<=e.stat(y.HP)&&(M=H(2048,M),g=H(2048,g));break;case"Huge Power":case"Pure Power":M=H(8192,M);break;case"Solar Power":i.sun()&&(g=H(6144,g));break;case"Hustle":p=I(6144,p);break;case"Flash Fire":e.flashFire&&r===E.FIRE&&(M=H(6144,M),g=H(6144,g));break;case"Slow Start":e.slowStart&&(M=H(2048,M));break;default:e.pinchAbilityActivated(r)&&(M=H(6144,M),g=H(6144,g))}switch(e.flowerGift&&i.sun()&&(M=H(6144,M)),e.item.name){case"Deep Sea Tooth":"Clamperl"===e.name&&(g=H(8192,g));break;case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(g=H(6144,g));break;case"Choice Band":M=H(6144,M);break;case"Choice Specs":g=H(6144,g);break;default:e.thickClubBoosted()?M=H(8192,M):e.lightBallBoosted()&&(M=H(8192,M),g=H(8192,g))}p=I(M,p),S=I(g,S),i.sand()&&t.stab(E.ROCK)&&(b=I(6144,b));let A,R,T=4096,v=4096;switch("Marvel Scale"===t.ability.name&&t.status?T=H(6144,T):"Grass Pelt"===t.ability.name&&i.grassyTerrain()&&(T=H(6144,T)),t.flowerGift&&i.sun()&&(v=H(6144,v)),t.item.name){case"Deep Sea Scale":"Clamperl"===t.name&&(v=H(6144,v));break;case"Metal Powder":"Ditto"===t.name&&(T=H(8192,T));break;case"Eviolite":t.hasEvolution()&&(T=H(6144,T),v=H(6144,v));break;case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(v=H(6144,v));break;case"Assault Vest":v=H(6144,v)}if(f=I(T,f),b=I(v,b),a.isPsyshockLike())A=S,R=f;else if(a.isPhysical())A=p,R=f;else{if(!a.isSpecial())return[0];A=S,R=b}let k=Math.trunc(Math.trunc(Math.trunc(2*e.level/5+2)*n*A/R)/50);if(k+=2,i.multiBattle&&a.hasMultipleTargets()&&(k=I(3072,k)),"Weather Ball"!==a.name){if(i.harshSun()&&r===E.WATER||i.heavyRain()&&r===E.FIRE)return[0];i.sun()?r===E.FIRE?k=I(6144,k):r===E.WATER&&(k=I(2048,k)):i.rain()&&(r===E.WATER?k=I(6144,k):r===E.FIRE&&(k=I(2048,k)))}(i.grassyTerrain()&&r===E.GRASS||i.electricTerrain()&&r===E.ELECTRIC||i.psychicTerrain()&&r===E.PSYCHIC)&&e.isGrounded(i)&&(k=I(6144,k)),i.mistyTerrain()&&t.isGrounded(i)&&r===E.DRAGON&&(k=I(2048,k)),a.critical&&(k=I(6144,k));let P=O(k,85,100);(e.stab(r)||"Protean"===e.ability.name)&&(P="Adaptability"===e.ability.name?w(8192,P):w(6144,P)),P=P.map(e=>Math.trunc(e*o[0]/o[1])),e.isBurned()&&a.isPhysical()&&"Guts"!==e.ability.name&&"Facade"!==a.name&&(P=P.map(e=>Math.trunc(e/2))),P=P.map(e=>Math.max(1,e));let D=4096;switch(a.critical||"Infiltrator"===e.ability.name||(t.reflect&&(a.isPhysical()||a.isPsyshockLike())&&(D=H(i.multiBattle?2703:2048,D)),t.lightScreen&&a.isSpecial()&&!a.isPsyshockLike()&&(D=H(i.multiBattle?2703:2048,D))),t.multiscaleIsActive()&&(D=H(2048,D)),"Fur Coat"===t.ability.name&&(a.isPhysical()||a.isPsyshockLike())&&(D=H(2048,D)),c&&"Tinted Lens"===e.ability.name&&(D=H(8192,D)),t.friendGuard&&(D=H(3072,D)),"Sniper"===e.ability.name&&a.critical&&(D=H(6144,D)),u&&t.ability.reducesSuperEffective()&&(D=H(3072,D)),i.grassyTerrain()&&a.weakenedByGrassyTerrain()&&(D=H(2048,D)),e.item.name){case"Metronome":if(e.metronome<=4){const t=4096+819*e.metronome;D=H(t,D)}else D=H(8192,D);break;case"Expert Belt":u&&(D=H(4915,D));break;case"Life Orb":D=H(5324,D)}return r!==t.item.berryTypeResist()||!u&&r!==E.NORMAL||(D=H(2048,D),t.item.used=!0),(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.minimize&&a.boostedByMinimize())&&(D=H(8192,D)),P=w(D,P)},[f.SM]:(e,t,a,i)=>{const s=Ot(e,t,a,i);if(s.fail||0===s.effectiveness[0])return[0];const{moveType:r,movePower:n,effectiveness:o,superEffective:u,notVeryEffective:c}=s,h=i.wonderRoom?y.SDEF:y.DEF,l=i.wonderRoom?y.DEF:y.SDEF,m="Unaware"===e.ability.name,d="Unaware"===t.ability.name;let p,f,S,b;"Foul Play"===a.name?(m?(f=t.stat(h),b=t.stat(l),p=t.stat(y.ATK)):a.critical?(f=Math.min(t.stat(h),t.boostedStat(h)),b=Math.min(t.stat(l),t.boostedStat(l)),p=Math.max(t.stat(y.ATK),t.boostedStat(y.ATK))):(f=t.boostedStat(h),b=t.boostedStat(l),p=t.boostedStat(y.ATK)),S=d?e.stat(y.SATK):a.critical?Math.max(e.stat(y.SATK),e.boostedStat(y.SATK)):e.boostedStat(y.SATK)):a.ignoresDefenseBoosts()?(f=t.stat(h),b=t.stat(l),d?(p=e.stat(y.ATK),S=e.stat(y.SATK)):a.critical?(p=Math.max(e.stat(y.ATK),e.boostedStat(y.ATK)),S=Math.max(e.stat(y.SATK),e.boostedStat(y.SATK))):(p=e.boostedStat(y.ATK),S=e.boostedStat(y.SATK))):(m?(f=t.stat(h),b=t.stat(l)):a.critical?(f=Math.min(t.stat(h),t.boostedStat(h)),b=Math.min(t.stat(l),t.boostedStat(l))):(f=t.boostedStat(h),b=t.boostedStat(l)),d?(p=e.stat(y.ATK),S=e.stat(y.SATK)):a.critical?(p=Math.max(e.stat(y.ATK),e.boostedStat(y.ATK)),S=Math.max(e.stat(y.SATK),e.boostedStat(y.SATK))):(p=e.boostedStat(y.ATK),S=e.boostedStat(y.SATK)));let M=4096,g=4096;switch("Thick Fat"!==t.ability.name||r!==E.FIRE&&r!==E.ICE||(M=H(2048,M),g=H(2048,g)),e.ability.name){case"Guts":t.status&&(M=H(6144,M));break;case"Plus":e.minus&&(g=H(6144,g));break;case"Minus":e.plus&&(g=H(6144,g));break;case"Defeatist":2*e.currentHp<=e.stat(y.HP)&&(M=H(2048,M),g=H(2048,g));break;case"Huge Power":case"Pure Power":M=H(8192,M);break;case"Solar Power":i.sun()&&(g=H(6144,g));break;case"Hustle":p=I(6144,p);break;case"Flash Fire":e.flashFire&&r===E.FIRE&&(M=H(6144,M),g=H(6144,g));break;case"Slow Start":e.slowStart&&(M=H(2048,M));break;default:e.pinchAbilityActivated(r)&&(M=H(6144,M),g=H(6144,g))}switch(e.flowerGift&&i.sun()&&(M=H(6144,M)),e.battery&&(g=H(5325,g)),e.item.name){case"Deep Sea Tooth":"Clamperl"===e.name&&(g=H(8192,g));break;case"Choice Band":M=H(6144,M);break;case"Choice Specs":g=H(6144,g);break;default:e.thickClubBoosted()?M=H(8192,M):e.lightBallBoosted()&&(M=H(8192,M),g=H(8192,g))}p=I(M,p),S=I(g,S),i.sand()&&t.stab(E.ROCK)&&(b=I(6144,b));let A,R,T=4096,v=4096;switch("Marvel Scale"===t.ability.name&&t.status?T=H(6144,T):"Grass Pelt"===t.ability.name&&i.grassyTerrain()&&(T=H(6144,T)),t.flowerGift&&i.sun()&&(v=H(6144,v)),t.item.name){case"Deep Sea Scale":"Clamperl"===t.name&&(v=H(6144,v));break;case"Metal Powder":"Ditto"===t.name&&(T=H(8192,T));break;case"Eviolite":t.hasEvolution()&&(T=H(6144,T),v=H(6144,v));break;case"Assault Vest":v=H(6144,v)}if(f=I(T,f),b=I(v,b),a.usesMaxAttackingStat())A=Math.max(p,S),R=b;else if(a.isPsyshockLike())A=S,R=f;else if(a.isPhysical())A=p,R=f;else{if(!a.isSpecial())return[0];A=S,R=b}let k=Math.trunc(Math.trunc(Math.trunc(2*e.level/5+2)*n*A/R)/50);if(k+=2,i.multiBattle&&a.hasMultipleTargets()&&(k=I(3072,k)),"Weather Ball"!==a.name){if(i.harshSun()&&r===E.WATER||i.heavyRain()&&r===E.FIRE)return[0];i.sun()?r===E.FIRE?k=I(6144,k):r===E.WATER&&(k=I(2048,k)):i.rain()&&(r===E.WATER?k=I(6144,k):r===E.FIRE&&(k=I(2048,k)))}(i.grassyTerrain()&&r===E.GRASS||i.electricTerrain()&&r===E.ELECTRIC||i.psychicTerrain()&&r===E.PSYCHIC)&&e.isGrounded(i)&&(k=I(6144,k)),i.mistyTerrain()&&t.isGrounded(i)&&r===E.DRAGON&&(k=I(2048,k)),a.critical&&(k=I(6144,k));let P=O(k,85,100);(e.stab(r)||"Protean"===e.ability.name)&&(P="Adaptability"===e.ability.name?w(8192,P):w(6144,P)),P=P.map(e=>Math.trunc(e*o[0]/o[1])),e.isBurned()&&a.isPhysical()&&"Guts"!==e.ability.name&&"Facade"!==a.name&&(P=P.map(e=>Math.trunc(e/2))),P=P.map(e=>Math.max(1,e));let D=4096;switch(a.critical||"Infiltrator"===e.ability.name||(t.reflect&&(a.isPhysical()||a.isPsyshockLike())&&(D=H(i.multiBattle?2703:2048,D)),t.lightScreen&&a.isSpecial()&&!a.isPsyshockLike()&&(D=H(i.multiBattle?2703:2048,D))),t.multiscaleIsActive()&&(D=H(2048,D)),"Fur Coat"===t.ability.name&&(a.isPhysical()||a.isPsyshockLike())&&(D=H(2048,D)),c&&"Tinted Lens"===e.ability.name&&(D=H(8192,D)),t.friendGuard&&(D=H(3072,D)),t.auroraVeil&&(D=H(i.multiBattle?2730:2048,D)),"Sniper"===e.ability.name&&a.critical&&(D=H(6144,D)),u&&t.ability.reducesSuperEffective()&&(D=H(3072,D)),i.grassyTerrain()&&a.weakenedByGrassyTerrain()&&(D=H(2048,D)),e.item.name){case"Metronome":if(e.metronome<=4){const t=4096+819*e.metronome;D=H(t,D)}else D=H(8192,D);break;case"Expert Belt":u&&(D=H(4915,D));break;case"Life Orb":D=H(5324,D)}return t.item.berryTypeResist()!==r||!u&&r!==E.NORMAL||(D=H(2048,D),t.item.used=!0),(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.minimize&&a.boostedByMinimize())&&(D=H(8192,D)),P=w(D,P)}},Ft=At()(e=>new Tt(e),(e,t,a,i)=>{const s=i.gen,r=t.stat(y.HP),n=e.level;switch(a.name){case"Seismic Toss":case"Night Shade":return[e.level];case"Dragon Rage":return[40];case"Sonic Boom":return[20];case"Psywave":{const e=[];if(s<=f.GSC)for(let t=1;t<Math.trunc(3*n/2);t++)e.push(t);else{const t=s<=f.HGSS?10:1;for(let a=50;a<=150;a+=t)e.push(Math.max(1,Math.trunc(n*a/100)))}return e}case"Super Fang":case"Nature's Madness":return[Math.max(1,Math.trunc(t.currentHp/2))];case"Guardian of Alola":return[Math.max(1,Math.trunc(3*t.currentHp/4))];case"Endeavor":return[Math.max(0,t.currentHp-e.currentHp)];case"Final Gambit":return[e.currentHp];default:if(a.isOther()||a.isSound()&&"Soundproof"===t.ability.name||a.isBall()&&"Bulletproof"===t.ability.name||a.isExplosion()&&"Damp"===t.ability.name)return[0];if(a.isOhko())return[r]}let o=Lt[i.gen](e,t,a,i);return"Sturdy"===t.ability.name&&t.currentHp===r&&(o=o.map(e=>Math.min(r-1,e))),o});function xt(e,t,a,i){let s;if("Triple Kick"===a.name){s=new Tt([0]);for(let r=1;r<=3;r++)a.tripleKickCount=r,s=s.permute(Ft(e,t,a,i),Nt),t.brokenMultiscale=!0;a.tripleKickCount=1}else if("Beat Up"===a.name){s=new Tt([0]);for(let r=0;r<e.beatUpStats.length;r++)a.beatUpHit=r,s=s.permute(Ft(e,t,a,i),Nt),t.brokenMultiscale=!0;a.beatUpHit=0}else if("Present"===a.name){const r=new Tt([-Math.max(1,Math.floor(t.stat(y.HP)/4))]);if(-1===a.present){const n=[r];for(let s=1;s<=3;s++)a.present=s,n.push(Ft(e,t,a,i));a.present=-1,s=Tt.weightedUnion(n,i.gen>=f.ADV?[2,4,3,1]:[52,102,76,26])}else s=0===a.present?r:Ft(e,t,a,i)}else if("Parental Bond"!==e.ability.name||1!==a.maxHits()||!a.affectedByParentalBond()||i.multiBattle&&a.hasMultipleTargets())if(a.maxHits()>1){const r=[new Tt([0])];for(let s=1;s<=a.maxHits();s++)i.gen>=f.GSC?r.push(r[s-1].permute(Ft(e,t,a,i),Nt)):r.push(Ft(e,t,a,i).map(e=>e*s)),t.brokenMultiscale=!0;if(a.numberOfHits>=1)s=r[a.numberOfHits];else if(2===a.maxHits())s=r[2];else{const e=i.gen>=f.B2W2?[0,0,2,2,1,1]:[0,0,3,3,1,1];s=Tt.weightedUnion(r.slice(a.minHits(),a.maxHits()),e.slice(a.minHits(),a.maxHits()))}}else s=Ft(e,t,a,i),t.brokenMultiscale=!0;else s=Ft(e,t,a,i),a.secondHit=!0,t.brokenMultiscale=!0,s=s.permute(Ft(e,t,a,i),Nt),a.secondHit=!1;return"Knock Off"===a.name&&t.knockOff()&&(t.item.used=!0),s.size.leq(39)?s:s.simplify()}var Gt=(e,t,a,i)=>{switch(a.name){case"(No Move)":return[[new Tt([0])],[NaN]];case"Fury Cutter":{const s=[],r=[],n=a.furyCutter;for(;a.furyCutter<5;)s.push(xt(e,t,a,i)),r.push(1),a.furyCutter++;return s.push(xt(e,t,a,i)),r.push(0),a.furyCutter=n,t.brokenMultiscale=!1,[s,r]}case"Echoed Voice":{const s=[],r=[],n=a.echoedVoice;for(;a.echoedVoice<4;)s.push(xt(e,t,a,i)),r.push(1),a.echoedVoice++;return s.push(xt(e,t,a,i)),r.push(0),a.echoedVoice=n,t.brokenMultiscale=!1,[s,r]}case"Trump Card":{const s=[],r=[],n=a.trumpPP;for(s.push(xt(e,t,a,i));a.trumpPP>0;)r.push(1),"Pressure"===t.ability.name?a.trumpPP-=Math.min(2,a.trumpPP):a.trumpPP--,s.push(xt(e,t,a,i));return r.push(NaN),a.trumpPP=n,t.brokenMultiscale=!1,[s,r]}case"Explosion":case"Self-Destruct":{const s=[xt(e,t,a,i)],r=[NaN];return t.brokenMultiscale=!1,[s,r]}case"Rollout":case"Ice Ball":{const s=[],r=[],n=a.rollout;for(let n=0;n<4;n++)s.push(xt(e,t,a,i)),r.push(1),a.rollout++;return s.push(xt(e,t,a,i)),r.push(-4),a.rollout=n,t.brokenMultiscale=!1,[s,r]}default:{const s=[xt(e,t,a,i),xt(e,t,a,i)],r=[1,0];return t.brokenMultiscale=!1,[s,r]}}},Kt=(e,t)=>{const a=[],i=[],s=e.stat(y.HP);return t.sand()&&e.hurtBySandstorm()?(a.push(-Math.max(1,Math.trunc(s/16))),i.push("Sandstorm")):t.hail()&&e.hurtByHail()&&(a.push(-Math.max(1,Math.trunc(s/16))),i.push("Hail")),"Leftovers"===e.item.name&&(a.push(Math.max(1,Math.trunc(s/16))),i.push("Leftovers")),e.isBurned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Burn")):e.isPoisoned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Poison")):e.isBadlyPoisoned()&&(a.push("toxic"),i.push("Toxic")),{values:a,messages:i}},Ut=(e,t,a)=>{const i=[],s=[],r=t.stat(y.HP);if(a.sand()&&t.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&t.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===t.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===t.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===t.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===t.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===t.item.name&&(t.stab(E.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),"Heatproof"===t.ability.nonDisabledName()&&t.isBurned()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Burn")):t.isBurned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Burn")):t.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):t.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),t.isAsleep()&&"Bad Dreams"===e.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===t.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===t.ability.name)for(let e=1;e<i.length;e++)i[e]<0&&(i.splice(e,1),s.splice(e,1));return{values:i,messages:s}},Yt=(e,t)=>{const a=[],i=[],s=e.stat(y.HP);return e.isBurned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Burn")):e.isPoisoned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Poison")):e.isBadlyPoisoned()&&(a.push("toxic"),i.push("Toxic")),t.sand()&&e.hurtBySandstorm()&&(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Sandstorm")),"Leftovers"===e.item.name&&(a.push(Math.max(1,Math.trunc(s/16))),i.push("Leftovers")),{values:a,messages:i}},_t=(e,t,a)=>{const i=[],s=[],r=t.stat(y.HP);if(a.sand()&&t.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&t.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===t.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===t.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===t.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===t.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===t.item.name&&(t.stab(E.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),t.isBurned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Burn")):t.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):t.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),t.isAsleep()&&"Bad Dreams"===e.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===t.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===t.ability.name)for(let e=1;e<i.length;e++)i[e]<0&&(i.splice(e,1),s.splice(e,1));return{values:i,messages:s}},Wt=(e,t,a)=>{const i=[],s=[],r=t.stat(y.HP);if(a.sand()&&t.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&t.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===t.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===t.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===t.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===t.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===t.item.name&&(t.stab(E.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),"Heatproof"===t.ability.nonDisabledName()&&t.isBurned()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Burn")):t.isBurned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Burn")):t.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):t.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),t.isAsleep()&&"Bad Dreams"===e.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===t.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===t.ability.name)for(let e=1;e<i.length;e++)i[e]<0&&(i.splice(e,1),s.splice(e,1));return{values:i,messages:s}},Vt=e=>{const t=[],a=[],i=e.stat(y.HP);return e.isBurned()?(t.push(-Math.max(1,Math.trunc(i/16))),a.push("Burn")):e.isPoisoned()?(t.push(-Math.max(1,Math.trunc(i/16))),a.push("Poison")):e.isBadlyPoisoned()&&(t.push("toxic"),a.push("Toxic")),{values:t,messages:a}},jt=(e,t,a)=>{const i=[],s=[],r=t.stat(y.HP);if(a.sand()&&t.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&t.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===t.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===t.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===t.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===t.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===t.item.name&&(t.stab(E.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),a.grassyTerrain()&&t.isGrounded(a)&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Grassy Terrain")),"Heatproof"===t.ability.nonDisabledName()&&t.isBurned()?(i.push(-Math.max(1,Math.trunc(r/32))),s.push("Burn")):t.isBurned()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Burn")):t.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):t.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),t.isAsleep()&&"Bad Dreams"===e.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===t.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===t.ability.name)for(let e=1;e<i.length;e++)i[e]<0&&(i.splice(e,1),s.splice(e,1));return{values:i,messages:s}};class zt extends RangeError{constructor(){super("Pokemon cannot be (No Pokemon)"),this.name="NoPokemonError"}}class qt extends RangeError{constructor(){super("Move cannot be (No Move)"),this.name="NoMoveError"}}function Qt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qt(this,"gen",b),Qt(this,"weather",v.CLEAR),Qt(this,"terrain",D.NO_TERRAIN),Qt(this,"multiBattle",!1),Qt(this,"invertedBattle",!1),Qt(this,"airLock",!1),Qt(this,"waterSport",!1),Qt(this,"mudSport",!1),Qt(this,"magicRoom",!1),Qt(this,"wonderRoom",!1),Qt(this,"gravity",!1),Qt(this,"fairyAura",!1),Qt(this,"darkAura",!1),Qt(this,"auraBreak",!1),Qt(this,"ionDeluge",!1),Object.assign(this,e)}effectiveWeather(){return this.airLock?v.CLEAR:this.weather}isClearWeather(){return this.effectiveWeather()===v.CLEAR}rain(){const e=this.effectiveWeather();return e===v.RAIN||e===v.HEAVY_RAIN}sun(){const e=this.effectiveWeather();return e===v.SUN||e===v.HARSH_SUN}sand(){return this.effectiveWeather()===v.SAND}hail(){return this.effectiveWeather()===v.HAIL}heavyRain(){return this.effectiveWeather()===v.HEAVY_RAIN}harshSun(){return this.effectiveWeather()===v.HARSH_SUN}strongWinds(){return this.effectiveWeather()===v.STRONG_WINDS}grassyTerrain(){return this.terrain===D.GRASSY_TERRAIN}mistyTerrain(){return this.terrain===D.MISTY_TERRAIN}electricTerrain(){return this.terrain===D.ELECTRIC_TERRAIN}psychicTerrain(){return this.terrain===D.PSYCHIC_TERRAIN}}a(250),a(89);function Jt(e,t){if(null==e)return{};var a,i,s=function(e,t){if(null==e)return{};var a,i,s={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Xt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $t{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Xt(this,"gen",b),Xt(this,"id","noability"),Xt(this,"disabled",!1);const{id:t,name:a}=e,i=Jt(e,["id","name"]);Object.assign(this,i),"string"==typeof t?this.id=Ze(t):"string"==typeof a&&(this.name=a)}get name(){return Qe(this.effectiveId())}set name(e){this.id=Ze(e)}nonDisabledName(){return Qe(this.id)}pinchType(){return tt(this.effectiveId(),this.gen)}normalToType(){return it(this.effectiveId(),this.gen)}immunityType(){return et(this.effectiveId(),this.gen)}ignoresAbilities(){return st(this.effectiveId(),this.gen)}isIgnorable(){return Je(this.id,this.gen)}isSandImmunity(){return["Magic Guard","Overcoat","Sand Veil","Sand Rush","Sand Force"].includes(this.name)}isHailImmunity(){return["Magic Guard","Overcoat","Ice Body","Snow Cloak","Slush Rush"].includes(this.name)}reducesSuperEffective(){return["Filter","Solid Rock","Prism Armor"].includes(this.name)}hasCritArmor(){return at(this.id,this.gen)}effectiveId(){return this.disabled?"noability":this.id}}function ea(e,t){if(null==e)return{};var a,i,s=function(e,t){if(null==e)return{};var a,i,s={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function ta(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const aa=new Set(["Figy Berry","Wiki Berry","Mago Berry","Aguav Berry","Iapapa Berry"]);class ia{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ta(this,"gen",b),ta(this,"id","noitem"),ta(this,"used",!1),ta(this,"disabled",!1);const{id:t,name:a}=e,i=ea(e,["id","name"]);Object.assign(this,i),"string"==typeof t?this.id=Oe(t):"string"==typeof a&&(this.name=a)}get name(){return we(this.effectiveId())}set name(e){this.id=Oe(e)}nonDisabledName(){return we(this.used?"noitem":this.id)}boostedType(){return Fe(this.effectiveId(),this.gen)}isBerry(){return Ke(this.used?"noitem":this.id,this.gen)}isPlate(){return Le(this.used?"noitem":this.id,this.gen)}berryTypeResist(){return xe(this.effectiveId(),this.gen)}naturalGiftPower(){return Ue(this.effectiveId(),this.gen)}naturalGiftType(){return Ye(this.effectiveId(),this.gen)}flingPower(){return _e(this.effectiveId(),this.gen)}gemType(){return Ge(this.effectiveId(),this.gen)}isHeavy(){return Ne(this.used?"noitem":this.id,this.gen)}mega(){return We(this.id,this.gen)}memoryType(){return Ve(this.id,this.gen)}berryHeal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;const t=this.name;switch(t){case"Sitrus Berry":return this.gen>=f.HGSS?Math.trunc(e/4):30;case"Oran Berry":case"Berry":return 10;case"Gold Berry":return 30;default:return aa.has(t)?this.gen>=f.SM?Math.trunc(e/2):Math.trunc(e/8):0}}berryHealThreshold(e){return this.gen>=f.SM&&aa.has(this.name)?Math.floor(e/4):Math.floor(e/2)}zMoveTransformsTo(){return ze(this.id,this.gen)}zMoveTransformsFrom(){return qe(this.id,this.gen)}effectiveId(){return this.used||this.disabled?"noitem":this.id}}function sa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){na(e,t,a[t])})}return e}function ra(e,t){if(null==e)return{};var a,i,s=function(e,t){if(null==e)return{};var a,i,s={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const oa=["HP","Atk","Def","SpA","SpD","Spe"],ua=["","(M)","(F)",""],ca=new Map([["HP",y.HP],["Atk",y.ATK],["Def",y.DEF],["SAtk",y.SATK],["SpAtk",y.SATK],["SpA",y.SATK],["SDef",y.SDEF],["SpDef",y.SDEF],["SpD",y.SDEF],["Spd",y.SPD],["Spe",y.SPD],["Spc",y.SPC]]);function ha(e,t,a){if(t.name=ue(ce(a)),t.isHiddenPower()){const a=t.type(),i=wt.hiddenPowers(a,t.gen)[0];i&&a!==wt.hiddenPowerType(e.ivs,t.gen)&&(e.ivs=i)}}function la(e,t){let{min:a,max:i,multipleOf:s=1,defaultValue:r}=t;const n=[0,0,0,0,0,0].fill(r);for(const t of e.split("/").map(e=>e.trim())){let e=Number.parseInt(t,10);e=Number.isNaN(e)?r:Math.trunc(kt()(e,a,i)/s)*s;const o=ca.get(t.split(" ")[1]);void 0!==o&&(n[o]=e)}return n}const ma=(e,t)=>("(No Move)"===e.name?1:0)-("(No Move)"===t.name?1:0),da=e=>(1&e[y.ATK])<<3|(1&e[y.DEF])<<2|(1&e[y.SPD])<<1|1&e[y.SPC];function pa(e,t,a,i){if(i>=f.ADV)return t<31?"".concat(t," ").concat(oa[e]):"";if(e===y.HP)t=da(a);else if(e===y.SDEF){if(i<f.GSC)return"";t=a[y.SPC]}return t>=15?"":i<f.GSC&&e===y.SPC?"".concat(t," Spc"):"".concat(t," ").concat(oa[e])}function fa(e,t,a,i){if(i>=f.ADV)return t>0?"".concat(t," ").concat(oa[e]):"";if(e===y.SDEF){if(i<f.GSC)return"";t=a[y.SPC]}return t>=252?"":i<f.GSC&&e===y.SPC?"".concat(t," Spc"):"".concat(t," ").concat(oa[e])}class Sa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};na(this,"gen",b),na(this,"id","nopokemon"),na(this,"nickname",""),na(this,"evs",void 0),na(this,"ivs",void 0),na(this,"boosts",void 0),na(this,"level",100),na(this,"nature",k.HARDY),na(this,"gender",M.NO_GENDER),na(this,"ability",void 0),na(this,"item",void 0),na(this,"moves",void 0),na(this,"overrideTypes",void 0),na(this,"overrideStats",[]),na(this,"addedType",E.CURSE),na(this,"lightScreen",!1),na(this,"reflect",!1),na(this,"luckyChant",!1),na(this,"stockpile",0),na(this,"flashFire",!1),na(this,"metronome",0),na(this,"switchedOut",!1),na(this,"movedFirst",!1),na(this,"damagedPreviously",!1),na(this,"damagedByPainSplit",!1),na(this,"beatUpStats",void 0),na(this,"beatUpLevels",void 0),na(this,"plus",!1),na(this,"minus",!1),na(this,"electrify",!1),na(this,"happiness",0),na(this,"brokenMultiscale",!1),na(this,"autotomize",!1),na(this,"unburden",!1),na(this,"tailwind",!1),na(this,"slowStart",!1),na(this,"toxicCounter",0),na(this,"stealthRock",!1),na(this,"spikes",0),na(this,"flowerGift",!1),na(this,"powerTrick",!1),na(this,"foresight",!1),na(this,"friendGuard",!1),na(this,"battery",!1),na(this,"charge",!1),na(this,"helpingHand",!1),na(this,"auroraVeil",!1),na(this,"grounded",!1),na(this,"ungrounded",!1),na(this,"set",void 0),na(this,"_status",A.NO_STATUS),na(this,"_currentHp",void 0),na(this,"_currentHpRange",void 0),na(this,"_currentHpRangeBerry",void 0);const{id:t,name:a,evs:i,ivs:s,boosts:r,ability:n,item:o,moves:u,beatUpLevels:c,beatUpStats:h,overrideStats:l,overrideTypes:m,currentHp:d,currentHpRange:p,currentHpRangeBerry:S,_currentHp:g,_currentHpRange:R,_currentHpRangeBerry:T,status:v,_status:P}=e,D=ra(e,["id","name","evs","ivs","boosts","ability","item","moves","beatUpLevels","beatUpStats","overrideStats","overrideTypes","currentHp","currentHpRange","currentHpRangeBerry","_currentHp","_currentHpRange","_currentHpRangeBerry","status","_status"]);if(Object.assign(this,D),"string"==typeof t?this.id=Z(t):"string"==typeof a&&(this.name=a),i)this.evs=i.slice(0);else{const e=this.gen>=f.ADV?0:252;this.evs=[0,0,0,0,0,0].fill(e)}if(s)this.ivs=s.slice(0);else{const e=this.gen>=f.ADV?31:15;this.ivs=[0,0,0,0,0,0].fill(e)}this.boosts=r?r.slice(0):[0,0,0,0,0,0,0,0],this.beatUpStats=h?h.slice(0):[0],this.beatUpLevels=c?c.slice(0):[1],void 0!==v&&L(e,"status")?this._status=v:void 0!==P&&(this._status=P),this.ability=new $t("string"==typeof n?{name:n,gen:this.gen}:sa({},n||{},{gen:this.gen})),this.item=new ia("string"==typeof o?{name:o,gen:this.gen}:sa({},o||{},{gen:this.gen}));const B={user:this,gen:this.gen},H=u||[{},{},{},{}];if(this.moves=H.map(e=>new wt("string"==typeof e?sa({name:e},B):sa({},e||{},B))),this.overrideStats=l?l.slice(0):[],this.overrideTypes=m?m.slice(0):[-1,-1],void 0!==d&&L(e,"currentHp"))this._currentHp=d,this._currentHpRange=new Tt([d]),this._currentHpRangeBerry=new Tt;else if(p&&L(e,"currentHpRange")){this._currentHpRange=new Tt(p),this._currentHpRangeBerry=S&&L(e,"currentHpRangeBerry")?new Tt(S):new Tt;const t=this._currentHpRange.union(this._currentHpRangeBerry);this._currentHp=Tt.average(t,0)}else if(void 0!==g&&void 0!==R&&void 0!==T)this._currentHp=g,this._currentHpRange=new Tt(R),this._currentHpRangeBerry=new Tt(T);else{const e=this.stat(y.HP);this._currentHp=e,this._currentHpRange=new Tt([e]),this._currentHpRangeBerry=new Tt}}toImportable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[],a=[];a.push(this.name),this.gen>=f.ADV&&this.gender&&a.push(ua[this.gender]),this.gen>=f.GSC&&a.push("@",this.item.name),t.push(a.join(" ")),this.gen>=f.ADV&&t.push("Ability: ".concat(this.ability.name));const i=[];for(let e=0;e<6;e++){const t=fa(e,this.evs[e],this.evs,this.gen);t&&i.push(t)}i.length>0&&t.push("EVs: ".concat(i.join(" / ")));const s=wt.hiddenPowerType(this.ivs,this.gen),r=wt.hiddenPowers(s,this.gen)[0];if(!(this.gen>=f.GSC&&this.moves.some(e=>"Hidden Power"===e.name))||this.ivs.slice(1).join()!==r.slice(1).join()){const e=[];for(let t=0;t<6;t++){const a=pa(t,this.ivs[t],this.ivs,this.gen);a&&e.push(a)}e.length>0&&t.push("IVs: ".concat(e.join(" / ")))}if(this.gen>=f.ADV){let a="".concat(V(this.nature)," Nature");const i=q(this.nature);if(i[0]>-1&&e.natureInfo){const e=oa[i[0]],t=oa[i[1]];a+=" (+".concat(e,", -").concat(t,")")}t.push(a)}for(const e of this.moves)"Hidden Power"===e.name?t.push("- Hidden Power ".concat(ot(s))):"(No Move)"!==e.name&&t.push("- ".concat(e.name));return t.join("\n")}toSet(){const e={m:this.moves.map(e=>e.id)},t=this.gen>=f.ADV?0:252,a=this.gen>=f.ADV?31:15;return 100!==this.level&&(e.l=this.level),this.gen>=f.ADV&&this.nature!==k.HARDY&&(e.n=this.nature),this.gen>=f.ADV&&"(No Ability)"!==this.ability.name&&(e.a=this.ability.id),this.gen>=f.GSC&&"(No Item)"!==this.item.name&&(e.i=this.item.id),this.evs.some(e=>e!==t)&&(e.e=this.evs.map(e=>Math.trunc(e/4))),this.ivs.some(e=>e!==a)&&(e.d=this.ivs.slice(0)),e}get name(){return Q(this.id)}set name(e){this.id=Z(e)}stat(e){if(this.powerTrick&&e===y.ATK?e=y.DEF:this.powerTrick&&e===y.DEF&&(e=y.ATK),this.overrideStats[e])return this.overrideStats[e];const t=this.baseStat(e),a=this.level;let i,s;if(this.gen<f.ADV&&e===y.HP?(s=da(this.ivs),i=this.evs[e]):this.gen<f.ADV&&e===y.SDEF?(s=this.ivs[y.SPC],i=this.evs[y.SPC]):(s=this.ivs[e],i=this.evs[e]),i=Math.trunc(i/4),this.gen<f.ADV)return e===y.HP?Math.min(999,Math.trunc((2*(s+t)+i)*a/100)+a+10):Math.min(999,Math.trunc((2*(s+t)+i)*a/100)+5);if(e===y.HP)return 1===t?1:Math.trunc((s+2*t+i+100)*a/100)+10;const r=z(this.nature,e),n=Math.trunc((s+2*t+i)*a/100)+5;return Math.trunc(n*(10+r)/10)}boost(e){return this.gen<f.B2W2&&"Simple"===this.ability.name?kt()(2*this.boosts[e],-6,6):this.boosts[e]}boostedStat(e){const t=this.boost(e),a=this.stat(e);if(e===y.HP)return a;if(this.gen<f.ADV){const e=Math.trunc(Math.max(2,2+t)/Math.max(2,2-t)*100);return kt()(Math.trunc(a*e/100),1,999)}return Math.trunc(a*Math.max(2,2+t)/Math.max(2,2-t))}speed(e){let t=this.boostedStat(y.SPD);switch((e.rain()&&"Swift Swim"===this.ability.name||e.sun()&&"Chlorophyll"===this.ability.name||e.sand()&&"Sand Rush"===this.ability.name||e.hail()&&"Slush Rush"===this.ability.name||e.electricTerrain()&&"Surge Surfer"===this.ability.name)&&(t*=2),this.item.name){case"Choice Scarf":t=Math.trunc(3*t/2);break;case"Quick Powder":"Ditto"===this.name&&(t*=2);break;default:this.item.isHeavy()&&(t=Math.trunc(t/2))}return this.status&&"Quick Feet"===this.ability.name?t=Math.trunc(3*t/2):this.isParalyzed()&&(t=Math.trunc(t/4)),"Slow Start"===this.ability.name&&this.slowStart&&(t=Math.trunc(t/2)),this.unburden&&"(No Item)"===this.item.name&&"Unburden"===this.ability.name&&(t*=2),this.tailwind&&(t*=2),t}baseStat(e){return $(this.id,this.gen)[e]}get currentHp(){return this._currentHp}set currentHp(e){this._currentHp=e,this._currentHpRange=new Tt([e]),this._currentHpRangeBerry=new Tt}get currentHpRange(){return this._currentHpRange}set currentHpRange(e){this._currentHpRange=new Tt(e);const t=e.union(this.currentHpRangeBerry);this._currentHp=Tt.average(t,0)}get currentHpRangeBerry(){return this._currentHpRangeBerry}set currentHpRangeBerry(e){this._currentHpRangeBerry=new Tt(e);const t=e.union(this.currentHpRange);this._currentHp=Tt.average(t,0)}type1(){return this.overrideTypes[0]>-1?this.overrideTypes[0]:ae(this.id,this.gen)}type2(){return this.overrideTypes[1]>-1?this.overrideTypes[1]:ie(this.id,this.gen)}secondaryType(){return this.type2()===E.CURSE?this.type1():this.type2()}types(){return[this.type1(),this.type2(),this.addedType].filter(e=>e!==E.CURSE)}stab(e){return this.types().includes(e)}weight(){let e=ee(this.id,this.gen);return this.autotomize&&(e=Math.max(1,e-1e3)),"Light Metal"===this.ability.name?e=Math.max(1,e/2):"Heavy Metal"===this.ability.name&&(e*=2),"Float Stone"===this.item.name&&(e=Math.max(1,e/2)),B(e)}hasEvolution(){return se(this.id,this.gen)}hasPreEvolution(){return re(this.id,this.gen)}isMega(){return ne(this.id,this.gen)}isItemRequired(){return oe(this.id,this.gen)===this.item.id}hurtBySandstorm(){return!(this.ability.isSandImmunity()||"Safety Goggles"===this.item.name||this.stab(E.GROUND)||this.stab(E.ROCK)||this.stab(E.STEEL))}hurtByHail(){return!this.ability.isHailImmunity()&&"Safety Goggles"!==this.item.name&&!this.stab(E.ICE)}multiscaleIsActive(){return!this.brokenMultiscale&&this.currentHp===this.stat(y.HP)&&("Multiscale"===this.ability.name||"Shadow Shield"===this.ability.name)}get status(){return this.gen>=f.SM&&"Comatose"===this.ability.name?A.ASLEEP:this._status}set status(e){this._status=e}isHealthy(){return this.status===A.NO_STATUS}isPoisoned(){return this.status===A.POISONED}isBadlyPoisoned(){return this.status===A.BADLY_POISONED}isBurned(){return this.status===A.BURNED}isParalyzed(){return this.status===A.PARALYZED}isAsleep(){return this.status===A.ASLEEP}isFrozen(){return this.status===A.FROZEN}isMale(){return this.gender===M.MALE}isFemale(){return this.gender===M.FEMALE}hasPlate(){return this.item.isPlate()}hasDrive(){return this.item.nonDisabledName().endsWith(" Drive")}hasMemory(){return this.item.nonDisabledName().endsWith(" Memory")}hasBlueOrb(){return"Blue Orb"===this.item.nonDisabledName()}hasRedOrb(){return"Red Orb"===this.item.nonDisabledName()}hasGriseousOrb(){return"Griseous Orb"===this.item.nonDisabledName()}knockOff(){return"(No Item)"!==this.item.nonDisabledName()&&"Sticky Hold"!==this.ability.name&&!this.itemLocked()}knockOffBoost(){return"(No Item)"!==this.item.nonDisabledName()&&!this.itemLocked()}itemLocked(){return this.gen<f.B2W2?"Multitype"===this.ability.name||this.hasGriseousOrb()&&this.name.includes("Giratina"):this.item.mega()===this.id||this.hasPlate()&&"Multitype"===this.ability.name||this.hasBlueOrb()&&this.name.includes("Kyogre")||this.hasRedOrb()&&this.name.includes("Groudon")||this.hasMemory()&&this.name.includes("Silvally")||this.hasDrive()&&this.name.includes("Genesect")||this.hasGriseousOrb()&&this.name.includes("Giratina")}thickClubBoosted(){return"Thick Club"===this.item.name&&(this.name.includes("Cubone")||this.name.includes("Marowak"))}lightBallBoosted(){return"Light Ball"===this.item.name&&this.name.includes("Pikachu")}hasCritArmor(){return this.ability.hasCritArmor()||this.luckyChant}pinchAbilityActivated(e){return this.ability.pinchType()===e&&this.stat(y.HP)>=3*this.currentHp}isGrounded(e){return this.grounded||e.gravity||"Iron Ball"===this.item.name||!this.ungrounded&&this.ability.immunityType()!==E.GROUND&&!this.types().includes(E.FLYING)&&"Air Balloon"!==this.item.name}static fromImportable(e,t){const a=new Sa({gen:t});let i=0;const s=e.trim().replace("\r","").replace(/ {2,}/g," ").split("\n").map(e=>e.trim()),[r,n]=s[0].split("@"),o=function(e){const t=/\((.*?)\)/g,a=t.exec(e);if(!a)return{name:e.replace("*",""),nickname:"",gender:M.NO_GENDER};const i=t.exec(e);if(i){const t=ua.indexOf(i[0].toUpperCase());return{name:a[1],nickname:e.slice(0,a.index).trim(),gender:t>-1?t:M.NO_GENDER}}const s=ua.indexOf(a[0].toUpperCase());if(s>-1){const t=/.*?(?=\()/.exec(e);return{name:t?t[0]:"",nickname:"",gender:s}}return{name:a[1],nickname:e.slice(0,a.index).trim(),gender:M.NO_GENDER}}(r);a.name=o.name,a.nickname=o.nickname,a.gender=o.gender,t>=f.GSC&&n&&(a.item.name=n);for(const e of s.slice(1)){const s=e.indexOf(":");if(s<0)e.startsWith("-")||e.startsWith("~")?(ha(a,a.moves[i],e.slice(1)),i++):"nature"===e.split(" ")[1].toLowerCase()&&(a.nature=j(e.split(" ")[0]));else{const i=e.slice(0,s).trim().toLowerCase(),r=e.slice(s+1).trim();switch(i){case"level":a.level=kt()(Number.parseInt(r,10),1,100)||100;break;case"ability":case"trait":a.ability.name=r;break;case"evs":a.evs=la(r,{min:0,max:252,multipleOf:4,defaultValue:t>=f.ADV?0:252});break;case"ivs":a.ivs=la(r,{min:0,max:t>=f.ADV?31:15,defaultValue:t>=f.ADV?31:15})}}}return a.moves.sort(ma),a.happiness=Math.max(...a.moves.map(e=>e.optimalHappiness())),a}static fromSet(e){let{set:t,gen:a,id:i}=e;const s={gen:a,id:i};t.l&&(s.level=t.l),t.n&&(s.nature=t.n),t.a&&(s.ability={id:t.a,gen:a}),t.i&&(s.item={id:t.i,gen:a}),t.m&&(s.moves=t.m.map(e=>({id:e,gen:a}))),t.e&&(s.evs=t.e.map(e=>4*e)),t.d&&(s.ivs=t.d);const r=new Sa(s);return r.happiness=Math.max(...r.moves.map(e=>e.optimalHappiness())),r}static calcHealthDv(e){return da(e)}}function ba(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){ya(e,t,a[t])})}return e}function ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ma={[v.CLEAR]:"",[v.HAIL]:"in Hail",[v.RAIN]:"in Rain",[v.SAND]:"in Sand",[v.SUN]:"in Sun",[v.HEAVY_RAIN]:"in Heavy Rain",[v.HARSH_SUN]:"in Harsh Sun",[v.STRONG_WINDS]:"in Strong Winds"},ga={[A.NO_STATUS]:"",[A.POISONED]:"poisoned",[A.BADLY_POISONED]:"badly poisoned",[A.BURNED]:"burned",[A.PARALYZED]:"paralyzed",[A.ASLEEP]:"asleep",[A.FROZEN]:"frozen"};function Aa(e,t,a,i){const s=new Zt(i),{gen:r}=s,n=new Sa(ba({},e,{gen:r})),o=new Sa(ba({},t,{gen:r})),u=new wt(ba({},a,{user:n,target:o,gen:r})),c=[],h=[],l=[];if("(No Pokemon)"===n.name||"(No Pokemon)"===o.name)throw new zt;if("(No Move)"===u.name)throw new qt;(s.magicRoom||"Klutz"===n.ability.name||"Unnerve"===o.ability.name&&n.item.isBerry())&&(n.item.disabled=!0),(s.magicRoom||"Klutz"===o.ability.name||"Unnerve"===n.ability.name&&o.item.isBerry())&&(o.item.disabled=!0),"Air Lock"!==n.ability.name&&"Air Lock"!==o.ability.name||(s.airLock=!0),"Fairy Aura"!==n.ability.name&&"Fairy Aura"!==o.ability.name||(s.fairyAura=!0),"Dark Aura"!==n.ability.name&&"Dark Aura"!==o.ability.name||(s.darkAura=!0),"Aura Break"!==n.ability.name&&"Aura Break"!==o.ability.name||(s.auraBreak=!0);const m=function(e,t,a){switch(a.gen){case f.RBY:return Vt(t);case f.GSC:return Yt(t,a);case f.ADV:return Kt(t,a);case f.HGSS:return _t(e,t,a);case f.B2W2:return Ut(e,t,a);case f.ORAS:return Wt(e,t,a);case f.SM:return jt(e,t,a);default:throw new RangeError("".concat(a.gen," is not a valid generation"))}}(n,o,s);m.messages.unshift(""),m.values.unshift(0),(n.ability.ignoresAbilities()||u.ignoresAbilities())&&o.ability.isIgnorable()&&(o.ability.disabled=!1),o.hasCritArmor()||!u.canCrit()?u.critical=!1:"Merciless"===n.ability.name&&(o.isPoisoned()||o.isBadlyPoisoned())&&(u.critical=!0);const[d,p]=Gt(n,o,u,s);"Smack Down"!==u.name&&"Thousand Arrows"!==u.name||(o.grounded=!0),n.item.disabled=!1,n.item.used=!1,o.item.disabled=!1,o.item.used=!1,o.ability.disabled=!1;const S=o.stat(y.HP),b=Math.round(d[0].min(NaN)/S*1e3)/10,M=Math.round(d[0].max(NaN)/S*1e3)/10,g=e=>Math.max(0,S-e);let A=o.currentHpRange.map(g),R=o.currentHpRangeBerry.map(g),T=E.CURSE,v=0;"Hidden Power"===u.name?(T=wt.hiddenPowerType(n.ivs,r),v=wt.hiddenPowerBp(n.ivs,r)):"Weather Ball"===u.name?(T=wt.weatherBall(s.effectiveWeather()),v=r>=f.HGSS&&T?100:50):u.zMove?(T=u.type(),v=u.power()):T=u.type();let k=r>=f.GSC?y.SATK:y.SPC,P=r>=f.GSC?y.SDEF:y.SPC;if(u.isPsyshockLike()?(k=y.SATK,P=y.DEF):(r>=f.HGSS&&u.isPhysical()||r<f.HGSS&&lt(T))&&(k=y.ATK,P=y.DEF),n.boosts[k]&&c.push(n.boosts[k]>0?"+".concat(n.boosts[k]):"".concat(n.boosts[k])),r>=f.ADV||n.evs[k]<252){const e=r>=f.ADV?z(n.nature,k):0;e>0?c.push("".concat(n.evs[k],"+")):e<0?c.push("".concat(n.evs[k],"-")):c.push("".concat(n.evs[k])),c.push(k===y.ATK?"Atk":"SpA")}if(r>=f.GSC&&!n.isItemRequired()&&c.push(n.item.name),r>=f.ADV&&"(No Ability)"!==n.ability.name&&c.push(n.ability.name),c.push(n.name),n.isHealthy()||c.push("(".concat(ga[n.status],")")),u.critical&&c.push("critical hit"),n.helpingHand&&c.push("Helping Hand"),c.push(u.name),u.zMove||"Hidden Power"===u.name&&r<=f.B2W2)c.push("[".concat(v," BP]"));else if(u.hitsMultipleTimes()&&u.numberOfHits>=1){const e=u.numberOfHits;c.push("[".concat(e,e>1?" hits]":" hit]"))}if(c.push("vs."),o.boosts[P]&&c.push(o.boosts[P]>0?"+".concat(o.boosts[P]):"".concat(o.boosts[P])),r>=f.ADV||o.evs[P]<252||o.evs[y.HP]<252){c.push("".concat(o.evs[y.HP]," HP /"));const e=r>=f.ADV?z(o.nature,P):0;e>0?c.push("".concat(o.evs[P],"+")):e<0?c.push("".concat(o.evs[P],"-")):c.push("".concat(o.evs[P])),c.push(P===y.DEF?"Def":"SpD")}r>=f.GSC&&!o.isItemRequired()&&c.push(o.item.name),r>=f.ADV&&"(No Ability)"!==o.ability.name&&c.push(o.ability.name),c.push(o.name),o.isHealthy()||c.push("(".concat(ga[o.status],")"));const D=Math.floor(100*o.currentHp/o.stat(y.HP));if(D<100&&c.push("at ".concat(D,"%")),o.reflect&&P===y.DEF?c.push("behind Reflect"):!o.lightScreen||P!==y.SDEF&&P!==y.SPC||c.push("behind Light Screen"),Ma[s.weather]&&c.push(Ma[s.weather]),d[0].min(NaN)===d[0].max(NaN)?h.push(String(d[0].min(NaN)),"(".concat(b,"%)")):h.push("".concat(d[0].min(NaN)," - ").concat(d[0].max(NaN)),"(".concat(b," - ").concat(M,"%)")),"Magic Guard"!==o.ability.name){let e=0;if(o.stealthRock){const[t,a]=Mt(E.ROCK,o.types(),{gen:r});e+=Math.trunc(S*t/(8*a))}o.spikes>0&&o.isGrounded(s)&&(e+=Math.trunc(S/(10-2*o.spikes))),A=A.map(t=>Math.min(S,t+e)),R=R.map(t=>Math.min(S,t+e))}const B=function(e,t,a,i){const s=[],r=e.stat(y.HP),n=e.item.berryHeal(r),o=e.item.berryHealThreshold(r),{maxTurns:u=9,rechargeTurns:c=0,effects:h=[0]}=i;let l=new Tt(i.initDmgRange||[0]),m=new Tt(i.initDmgRangeBerry||[]),d=i.toxicCounter||0,p=new Tt,f=new Tt;const S=e=>e>=r,b=e=>r-e,M=(e,t)=>e>=r?e:e+t;for(let e=0,i=0;e<u;e++){l=l.permute(t[i],M),m=m.permute(t[i],M);for(let e=0;e<=c;e++)m=m.map(Ra.bind({effects:h,toxicCounter:d,totalHp:r})),l=l.map(Ra.bind({effects:h,toxicCounter:d,totalHp:r,berry:{heal:n,threshold:o,dmg:m}})),d++;if(s.push([l.count(S).add(m.count(S)),l.size.add(m.size)]),0===e&&(p=l.map(b),f=m.map(b)),i+=a[i],Number.isNaN(i)||s[s.length-1][0].eq(s[s.length-1][1]))break}return{fractionalChances:s,roundedChances:s.map(e=>{let[t,a]=e;return t.multiply(1e6).divide(a).valueOf()/1e6}),remainingHealth:p,remainingHealthBerry:f}}(o,d,p,{initDmgRange:A,initDmgRangeBerry:R,effects:m.values,rechargeTurns:u.requiresRecharge()?1:0,toxicCounter:o.toxicCounter});m.messages=m.messages.slice(1),m.values=m.values.slice(1);const H=[];for(let e=0;e<B.roundedChances.length;e++){const t="".concat(e?e+1:"O","HKO"),a=B.fractionalChances[e];if(a[0].eq(a[1])){0===H.length&&H.push("guaranteed ".concat(t));break}if(!a[0].isZero()){const a=Math.round(1e3*B.roundedChances[e])/10;100===a?H.push("almost guaranteed ".concat(t)):0===a?H.push("negligible chance to ".concat(t)):H.push("".concat(a,"% chance to ").concat(t))}}H.length>0?(l.push(H.join(", ")),m.messages.length>0&&l.push("after",m.messages.join(", "))):l.push("this might take a while..."),o.currentHpRange=B.remainingHealth,o.currentHpRangeBerry=B.remainingHealthBerry;const I=c.join(" "),w=h.join(" "),O=l.join(" ");return{summary:"".concat(I,": ").concat(w," -- ").concat(O),attacker:n,defender:o,move:u,field:s,minPercent:b,maxPercent:M,damages:d.slice(0,d.length-1),damage:d[0],effectValues:m.values,effectMessages:m.messages,fractionalChances:B.fractionalChances,roundedChances:B.roundedChances}}function Ra(e,t,a){const{berry:i,effects:s,totalHp:r,toxicCounter:n}=this;let o=!1;for(const t of s){if(e>=r)break;if("toxic"===t?e+=Math.trunc((n+1)*r/16):e=Math.max(0,e-t),void 0!==i){if(e>=r)break;!o&&i.heal>0&&r-e<=i.threshold&&(e=Math.max(0,e-i.heal),o=!0)}}return e=Math.min(r,e),void 0!==i&&o&&(i.dmg.add(e,t),a()),e}a.d(t,"o",function(){return i}),a.d(t,"s",function(){return Aa}),a.d(t,"f",function(){return Tt}),a.d(t,"h",function(){return Sa}),a.d(t,"a",function(){return $t}),a.d(t,"d",function(){return ia}),a.d(t,"e",function(){return wt}),a.d(t,"b",function(){return Zt}),a.d(t,"c",function(){return f}),a.d(t,"m",function(){return S}),a.d(t,"p",function(){return b}),a.d(t,"i",function(){return y}),a.d(t,"j",function(){return A}),a.d(t,"r",function(){return R}),a.d(t,"l",function(){return v}),a.d(t,"g",function(){return k}),a.d(t,"q",function(){return P}),a.d(t,"k",function(){return D}),a.d(t,"n",function(){return L})}]]);